{"componentChunkName":"component---src-templates-blog-template-js","path":"/from-time-to-time/mentoring/220927-fl-1/","result":{"data":{"cur":{"id":"37e3c60f-9248-50d3-bd60-6a80c9fa4ef3","html":"<h2 id=\"-f-lab-멘토링-기록\" style=\"position:relative;\"><a href=\"#-f-lab-%EB%A9%98%ED%86%A0%EB%A7%81-%EA%B8%B0%EB%A1%9D\" aria-label=\" f lab 멘토링 기록 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🌕 F-lab 멘토링 기록</h2>\n<p>멘토링 이후 부족한 부분을 채우기 위한 기록</p>\n<h3 id=\"이벤트-루프-매크로마이크로-테스크-큐\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%A3%A8%ED%94%84-%EB%A7%A4%ED%81%AC%EB%A1%9C%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C-%ED%85%8C%EC%8A%A4%ED%81%AC-%ED%81%90\" aria-label=\"이벤트 루프 매크로마이크로 테스크 큐 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이벤트 루프, 매크로/마이크로 테스크 큐</h3>\n<p><img src=\"/d310c604dac0d56b5f49f618dc524e77/eventloop-task-queue.gif\" alt=\"eventLoop-taskQueue\"></p>\n<ul>\n<li>자바스크립트는 싱글 스레드 기반의 언어이지만, 구동되는 환경(브라우저, Node.js)는 여러 스레드를 제공한다.</li>\n<li>이 때, 구동 환경과 자바스크립트 엔진을 연동하기 위해 사용되는 장치가 <code class=\"language-text\">이벤트 루프</code>\n<ul>\n<li>이벤트 발생 시 호출되는 콜백 함수들을 관리하여 태스크 큐에 전달하고 콜스택이 비었을 때, 콜스택으로 전달한다.</li>\n</ul>\n</li>\n<li>매크로 테스크 큐: DOM, setTimeout 등의 비동기 처리 콜백함수가 담기는 큐 자료구조</li>\n<li>마이크로 테스크 큐: Promise, async 등의 비동기 처리 콜백함수가 담기는 큐 자료구조</li>\n<li>코드 실행 우선 순위: 콜스택(메인 스레드, 자바스크립트 엔진) > 마이크로 테스크 큐 > 매크로 테스크 큐</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'script start'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// A</span>\n\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// B</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'setTimeout'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// C</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'promise1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// D</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'promise2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'script end'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// E</span></code></pre></div>\n<p>위 코드의 실행 순서: A E C D B</p>\n<h3 id=\"variable-environment와-lexical-environment\" style=\"position:relative;\"><a href=\"#variable-environment%EC%99%80-lexical-environment\" aria-label=\"variable environment와 lexical environment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Variable Environment와 Lexical Environment</h3>\n<ul>\n<li>Variable Environment: 실행 컨텍스트 생성 시 초기 상태를 스냅샷 형태로 저장(초기값 유지), 이후 이를 복사하여 LE에 할당</li>\n<li>Lexical Environment: 코드 실행 도중의 변경되는 사항이 즉시 반영, 그렇기에 주로 LE를 활용</li>\n</ul>\n<h3 id=\"prototype을-직접-변경했을-때의-단점\" style=\"position:relative;\"><a href=\"#prototype%EC%9D%84-%EC%A7%81%EC%A0%91-%EB%B3%80%EA%B2%BD%ED%96%88%EC%9D%84-%EB%95%8C%EC%9D%98-%EB%8B%A8%EC%A0%90\" aria-label=\"prototype을 직접 변경했을 때의 단점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[[Prototype]]을 직접 변경했을 때의 단점</h3>\n<ul>\n<li>자바스크립트 엔진이 속성의 접근을 최적화하는 방식의 특성 상, 굉장히 성능을 저하시키는 과정이다.</li>\n<li>따라서 Object.create(_.prototype)을 통해 새로운 객체를 만들도록 하는 것이 좋다.</li>\n</ul>\n<h3 id=\"웹-컴포넌트의-라이프사이클\" style=\"position:relative;\"><a href=\"#%EC%9B%B9-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8%EC%9D%98-%EB%9D%BC%EC%9D%B4%ED%94%84%EC%82%AC%EC%9D%B4%ED%81%B4\" aria-label=\"웹 컴포넌트의 라이프사이클 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웹 컴포넌트의 라이프사이클</h3>\n<ul>\n<li>라이프사이클: 말 그대로 생명주기를 뜻하며, 웹에서의 라이프사이클은 <code class=\"language-text\">한 화면이 생성되고 사라지기까지의 과정</code>이다.</li>\n<li>즉, 컴포넌트 라이프사이클이란 컴포넌트의 생성부터 제거될 때까지의 과정을 말하며, 이 과정에서 이벤트를 핸들링할 수 있는 다양한 API를 제공한다.</li>\n<li>웹 컴포넌트 라이프사이클\n<ul>\n<li>connectedCallback(): customElement가 DOM 요소로 추가될 때마다 호출되는 API</li>\n<li>disconnectedCallback(): customElement가 DOM에서 제거되었을 때마다 호출되는 API</li>\n<li>attributeChangedCallback(name, oldVlaue, newValue): 인자로 속성이름, 이전 속성값, 이후 속성값을 받으며 속성값이 변경될 때 호출되는 API\n<ul>\n<li>static get observedAttributes(): 반환값으로 [‘속성이름’]형태를 지정해주어야하며 해당하는 속성이름의 변화를 감지할 수 있게 된다.</li>\n</ul>\n</li>\n<li>adoptedCallback(): customElement가 다른 document로 이동될 때마다 호출되는 API</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"리플로우와-리페인트\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%ED%94%8C%EB%A1%9C%EC%9A%B0%EC%99%80-%EB%A6%AC%ED%8E%98%EC%9D%B8%ED%8A%B8\" aria-label=\"리플로우와 리페인트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리플로우와 리페인트</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.555555555555554%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA40lEQVQY042PW0vDQBBG8/9/kDcUxMcqgtG2USNL0pqQ66a72WTTXI7kIQGf9MAwHwNzmHEApmlCSkkcx7Rty6nJ+C59lC34L7NjxlkGURTheR5KKeLM5+Xtjiz2EHHBzfbAJizQquXpYcfj/Q5dGUzxTC6u6E2wSp0lpGmKEIK6NlSHD46bW3T4Tq0MSa4oK0N/7qkKjcwV/Xlg6Co6kzANzW/hjNaaspRYaxlOFU0o6NKU0Urag0t33MM4/v3yEoIgwHVdSinR+y3R9QXm08fWAcnXJY18XReXYu7juMrmC38As85/EYAccvQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"리플로우와 리페인트\"\n        title=\"리플로우와 리페인트\"\n        src=\"/static/ae131dedeb00acd1a80b36642d9dcf0e/37523/reflow-repaint.png\"\n        srcset=\"/static/ae131dedeb00acd1a80b36642d9dcf0e/e9ff0/reflow-repaint.png 180w,\n/static/ae131dedeb00acd1a80b36642d9dcf0e/f21e7/reflow-repaint.png 360w,\n/static/ae131dedeb00acd1a80b36642d9dcf0e/37523/reflow-repaint.png 720w,\n/static/ae131dedeb00acd1a80b36642d9dcf0e/302a4/reflow-repaint.png 1080w,\n/static/ae131dedeb00acd1a80b36642d9dcf0e/21b4d/reflow-repaint.png 1280w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>리플로우: 레이아웃을 다시 계산하는 것으로 노드의 추가/삭제, 요소 크기/위치 변경, 윈도우 리사이징 등 레이아웃에 영향을 주는 변경이 발생할 때 실행된다.</li>\n<li>리페인트: 재결합된 렌더 트리를 기반으로 다시 페인트를 하는 것을 말한다.</li>\n</ul>\n<blockquote>\n<p>웹 컴포넌트에서는 shadow DOM이라는 각 컴포넌트마다의 독립적인 DOM을 두어 위 과정이 해당하는 컴포넌트에서만 일어나게 하였다.</p>\n</blockquote>\n<h3 id=\"reset-css와-normalize-css\" style=\"position:relative;\"><a href=\"#reset-css%EC%99%80-normalize-css\" aria-label=\"reset css와 normalize css permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>reset CSS와 normalize CSS</h3>\n<p>먼저 이 둘이 필요한 이유를 알아야한다.<br/>\n알게 모르게 이미 기본적으로 브라우저마다 제공하는 stylesheet이 있는데 이를 <code class=\"language-text\">user-agent stylesheet</code>라고 한다.<br/>\n이런 기본적인 스타일시트를 처리하고 싶을 때, 위 2가지 방법이 존재한다.</p>\n<ul>\n<li>reset css: 말 그대로 모든 스타일시트를 초기화해버리는 것! 아예 하얀 도화지를 만들어서 <code class=\"language-text\">내가 다시 그리겠다</code>할 때 사용한다.\n<ul>\n<li><a href=\"https://meyerweb.com/eric/tools/css/reset/\">Eric의 Reset CSS</a></li>\n</ul>\n</li>\n<li>normalize css: 리셋하는 것이 아닌, 브라우저의 스타일을 적당히 <code class=\"language-text\">비슷하게 보이도록</code> 만든다. 굳이 다 지우지말고, 적당히 공통된 커스터마이징 스타일시트를 적용하자는 방법!\n<ul>\n<li><a href=\"https://github.com/necolas/normalize.css\">Nicolas의 Normalize Css</a></li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>정말 공부하고 하면 할수록 모르는 게 투성이고 알아야할 게 투성이다.\n사실은 그렇기 때문에 공부하는 재미가 있기도 하다.\n이번 멘토링에서 나온 큼직큼직한 질문들이 몇개 더 있어서 추후 2번째 글로 작성 예정이다.</p>\n</blockquote>\n<h5 id=\"️-reference\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-reference\" aria-label=\"️ reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🗒️ Reference</h5>\n<p><a href=\"https://velog.io/@yejineee/%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%A3%A8%ED%94%84%EC%99%80-%ED%83%9C%EC%8A%A4%ED%81%AC-%ED%81%90-%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C-%ED%83%9C%EC%8A%A4%ED%81%AC-%EB%A7%A4%ED%81%AC%EB%A1%9C-%ED%83%9C%EC%8A%A4%ED%81%AC-g6f0joxx\">이벤트루프, 매크로/마이크로 태스크 큐</a></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf\">Prototype 직접 변경의 문제</a></p>\n<p><a href=\"https://developer.mozilla.org/ko/docs/Web/Web_Components/Using_custom_elements#%EC%83%9D%EB%AA%85_%EC%A3%BC%EA%B8%B0_%EC%BD%9C%EB%B0%B1_%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\">웹 컴포넌트 생명주기</a></p>\n<p><a href=\"https://nykim.work/100\">reset css와 normalize css</a></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-f-lab-%EB%A9%98%ED%86%A0%EB%A7%81-%EA%B8%B0%EB%A1%9D\">🌕 F-lab 멘토링 기록</a></p>\n<ul>\n<li>\n<p><a href=\"#%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%A3%A8%ED%94%84-%EB%A7%A4%ED%81%AC%EB%A1%9C%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C-%ED%85%8C%EC%8A%A4%ED%81%AC-%ED%81%90\">이벤트 루프, 매크로/마이크로 테스크 큐</a></p>\n</li>\n<li>\n<p><a href=\"#variable-environment%EC%99%80-lexical-environment\">Variable Environment와 Lexical Environment</a></p>\n</li>\n<li>\n<p><a href=\"#prototype%EC%9D%84-%EC%A7%81%EC%A0%91-%EB%B3%80%EA%B2%BD%ED%96%88%EC%9D%84-%EB%95%8C%EC%9D%98-%EB%8B%A8%EC%A0%90\">[[Prototype]]을 직접 변경했을 때의 단점</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%9B%B9-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8%EC%9D%98-%EB%9D%BC%EC%9D%B4%ED%94%84%EC%82%AC%EC%9D%B4%ED%81%B4\">웹 컴포넌트의 라이프사이클</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%A6%AC%ED%94%8C%EB%A1%9C%EC%9A%B0%EC%99%80-%EB%A6%AC%ED%8E%98%EC%9D%B8%ED%8A%B8\">리플로우와 리페인트</a></p>\n</li>\n<li>\n<p><a href=\"#reset-css%EC%99%80-normalize-css\">reset CSS와 normalize CSS</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#%EF%B8%8F-reference\">🗒️ Reference</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"🌕 F-lab 멘토링 기록 멘토링 이후 부족한 부분을 채우기 위한 기록 이벤트 루프, 매크로/마이크로 테스크 큐 eventLoop-taskQueue 자바스크립트는 싱글 스레드 기반의 언어이지만, 구동되는 환경(브라우저, Node.js)는 여러 스레드를 제공한다. 이 때, 구동 환경과 자바스크립트 엔진을 연동하기 위해 사용되는 장치가  이벤트 발생 시 호출되는 콜백 함수들을 관리하여 태스크 큐에 전달하고 콜스택이 비었을 때, 콜스택으로 전달한다. 매크로 테스크 큐: DOM, setTimeout 등의 비동기 처리 콜백함수가 담기는 큐 자료구조 마이크로 테스크 큐: Promise, async 등의 비동기 처리 콜백함수가 담기는 큐 자료구조 코드 실행 우선 순위: 콜스택(메인 스레드, 자바스크립트 엔진) > 마이크로 테스크 큐 > 매크로 테스크 큐 위 코드의 실행 순서: A E C D B Variable Environment와 Lexical Environment Variable Envir…","frontmatter":{"date":"September 27, 2022","title":"멘토링 7번째(1)","categories":"멘토링","author":"제이든","emoji":"🏋️"},"fields":{"slug":"/from-time-to-time/mentoring/220927-fl-1/"}},"next":{"id":"9bafe0a8-95f7-5978-88c5-fe1dabe905b6","html":"<h2 id=\"-프로젝트-일지\" style=\"position:relative;\"><a href=\"#-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%9D%BC%EC%A7%80\" aria-label=\" 프로젝트 일지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔨 프로젝트 일지</h2>\n<blockquote>\n<p>정보 전달보단 프로젝트를 진행하며 겪은 점들, 느낀 점들을 기록한 일지</p>\n</blockquote>\n<h3 id=\"code-classlanguage-textprojectcode-get-shit-done\" style=\"position:relative;\"><a href=\"#code-classlanguage-textprojectcode-get-shit-done\" aria-label=\"code classlanguage textprojectcode get shit done permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">Project</code>: Get Shit Done</h3>\n<p>나만의 ToDo리스트를 만들기 위해 시작한 프로젝트<br/>\n<code class=\"language-text\">Get Shit Done</code>은 <code class=\"language-text\">그냥 닥치고 해</code>라는 의미로 평상시 스스로 다짐하는 문장인데, 투두리스트와 어울린다 생각하여 프로젝트명으로 정하게 되었다.<br/>\n이번 프로젝트의 가장 큰 목적과 의의는 웹팩 및 바벨을 통해 각 모듈을 <code class=\"language-text\">웹 컴포넌트</code>로 구성하여 동작하게 하는 것이다!!!</p>\n<h4 id=\"-컴포넌트-로직\" style=\"position:relative;\"><a href=\"#-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EB%A1%9C%EC%A7%81\" aria-label=\" 컴포넌트 로직 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤪 컴포넌트 로직</h4>\n<p>먼저 들어가기에 앞서 컴포넌트를 나눈 부분을 다시 보자면, 크게 아래와 같이 나누었다.</p>\n<ul>\n<li>todoApp.js: 전체 앱을 나타낸다.</li>\n<li>todoContainer.js: 앱 내에 메모장을 나타낸다.(여러개의 메모장을 생성하게 할 예정)</li>\n<li>todoToolbar.js: 메모에 대한 조작을 하는 툴바 부분</li>\n<li>todoNote.js: 툴바 조작에 따라 메모를 입력할 수 있는 input 부분</li>\n<li>todoList.js: 메모 전체를 감싸고 있는 부분</li>\n<li>todoItem.js: 메모 컴포넌트</li>\n</ul>\n<h5 id=\"-todonote\" style=\"position:relative;\"><a href=\"#-todonote\" aria-label=\" todonote permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🧭 todoNote</h5>\n<p>todoNote는 item(memo)을 추가하기 위한 컴포넌트로 memo의 내용을 입력하는 부분이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">connectedCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 1. Add 버튼 클릭 시 새로운 메모 생성</span>\n    <span class=\"token keyword\">const</span> $noteAddButton <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.note-add-button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> $noteInput <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.note-input'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    $noteAddButton<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 1-1. input이 없을 때는 메모 생성 막기</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>$noteInput<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">const</span> $todoItem <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todo-item'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $todoItem<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>containerTitle <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>containerTitle<span class=\"token punctuation\">;</span>\n      $todoItem<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>itemTitle <span class=\"token operator\">=</span> $noteInput<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>nextElementSibling<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>$todoItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 1-2. 메모 갯수 더하기</span>\n      <span class=\"token keyword\">const</span> $noteCount <span class=\"token operator\">=</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>previousElementSibling<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.count-item'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $noteCount<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token operator\">+</span>$noteCount<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 1-3. Add 버튼 비활성화</span>\n      $noteAddButton<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>opacity <span class=\"token operator\">=</span> <span class=\"token string\">'50%'</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 1-4. Add 사용자 활동 기록</span>\n      <span class=\"token keyword\">const</span> $record <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $record<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">'record'</span><span class=\"token punctuation\">;</span>\n      $record<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;span class=\"record-important\">@Jayden&lt;/span> added &lt;span class=\"record-important\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>$noteInput<span class=\"token punctuation\">.</span>value<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/span> to &lt;b></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>containerTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/b></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">const</span> now <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $record<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>timeMakeNote <span class=\"token operator\">=</span> now<span class=\"token punctuation\">;</span>\n      activityLog<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>$record<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 1-5. Add 버튼 클릭 후 입력칸 초기화</span>\n      $noteInput<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// 2. Cancel 버튼 클릭 시 todoNote 닫기</span>\n      <span class=\"token keyword\">const</span> $noteCancelButton <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">'.note-cancel-button'</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $noteCancelButton<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// 2-1. 메모 닫은 후 입력칸 초기화</span>\n        $noteInput<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 3. 메모 입력 시 Add 버튼 활성화</span>\n      $noteInput<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        $noteAddButton<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>opacity <span class=\"token operator\">=</span>\n          event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token string\">'50%'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 21.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA30lEQVQY03XIvUrDUByH4dycuAbU+3DwHsRBhM6CKHgBCqJFF8FNpKAd2koSbetpk5yP/2m6eZJXTAt1cXj4fUQzpRDrsMayEI+zjmKeU4ca6oYm1IQQCL8JrXot/MnvBpwIUWFKCm/IRZN7TenNZoumEE21XFJ5YaHSlnyl2Gmy7gnVLMNN3snVlKinBpwObrgYdVsP42eusifOhrecj+64HHbJRTDDF/TJDr6zy8dRzP3BNtf7WySHMb6zhz6O0a+PRKXVfGrF+B8TrRDvEVPi0v5K1keyTV/9b7hyzg/ygyB0jKfEGwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"todoNote\"\n        title=\"todoNote\"\n        src=\"/static/4888c69a5222627f7c118cfb7ce59f30/37523/todonote.png\"\n        srcset=\"/static/4888c69a5222627f7c118cfb7ce59f30/e9ff0/todonote.png 180w,\n/static/4888c69a5222627f7c118cfb7ce59f30/f21e7/todonote.png 360w,\n/static/4888c69a5222627f7c118cfb7ce59f30/37523/todonote.png 720w,\n/static/4888c69a5222627f7c118cfb7ce59f30/3c051/todonote.png 760w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>\n<p>1-1. input에 값이 없는 경우는 이벤트가 발생하지 않도록 <code class=\"language-text\">early return</code>을 활용했다.</p>\n<ul>\n<li>이런 패턴은 원치 않은 경우에, 아예 코드를 실행하지 않기때문에 메모리적인 면으로도 굉장히 유용하니 자주 사용하도록 하자!</li>\n</ul>\n</li>\n<li>\n<p>1-2. 이전 장의 todoToolbar에 있는 memo의 갯수를 더해주는 기능이다. 이 때는 다행히(?) toolbar와 note 컴포넌트가 형제관계라 접근하기 편했지만, 컴포넌트를 너무 복잡하게 나누면 더 접근하기 어려웠을 것 같다.</p>\n</li>\n<li>\n<p>1-4. 이 부분은 최근에 새로 추가한 로직으로, 메모에 대한 추가/수정/삭제에 대한 기록을 보여주는 기능을 구현하기 위함이다.</p>\n</li>\n<li>\n<p>1-5. 이런 게 놓치기 쉬운 것 같다. add 버튼으로 메모를 작성하고 다시 input에 값을 빈 값으로 초기화해준다. 뭔가 이런 부분이 컴퓨터이기에 하나하나 명령해줘야한다고 느끼는 부분이다.ㅋㅋ</p>\n</li>\n<li>\n<p>3 . 메모 input에 값이 생기면 시각적으로 뚜렷하게 하고 다시 input값의 길이가 0이되면 반투명하게 만든다.</p>\n</li>\n</ul>\n<h5 id=\"-todoitem\" style=\"position:relative;\"><a href=\"#-todoitem\" aria-label=\" todoitem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🧭 todoItem</h5>\n<p>추가할 로직이 제일 많았던, 메모 그 자체 컴포넌트인 todoItem!!! 거두절미하고 바로 코드로!!!</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">connectedCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 1. item이 생성되고 DOM에 추가될 때 그 안에 텍스트를 바꿔주기</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.item-content'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>itemTitle<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 추가) 모달 창 input value에도 같은 값 할당</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.modal-input'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>itemTitle<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 2. item X button 클릭 시 item 삭제 및 count 빼기</span>\n    <span class=\"token keyword\">const</span> $itemDeleteButton <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'.item-delete-button'</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    $itemDeleteButton<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 2-0. 컨펌 메시지 false인 경우 early return</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token string\">'선택하신 카드를 삭제하시겠습니까?'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 2-1. item 삭제</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 2-2. count 빼기</span>\n      <span class=\"token comment\">// ✅다시: shadow dom 바깥으로 가는 다른 루트는 없는지 확인</span>\n      <span class=\"token keyword\">const</span> containerTitle <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>containerTitle<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> $noteCount <span class=\"token operator\">=</span> document\n        <span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todo-app'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span>\n          <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">[\n            data-container-title=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>containerTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n          ]</span><span class=\"token template-punctuation string\">`</span></span>\n        <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todo-toolbar'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.count-item'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $noteCount<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token operator\">+</span>$noteCount<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 2-3. 활동 기록에 삭제 활동 추가</span>\n      <span class=\"token keyword\">const</span> $record <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $record<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">'record'</span><span class=\"token punctuation\">;</span>\n      $record<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;span class=\"record-important\">@Jayden&lt;/span> deleted &lt;span class=\"record-important\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>itemTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/span> from &lt;b></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>containerTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/b></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">const</span> now <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $record<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>timeMakeNote <span class=\"token operator\">=</span> now<span class=\"token punctuation\">;</span>\n      activityLog<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>$record<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 3. 아이템 더블 클릭 시 수정 모달 생성</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dblclick'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.item-modal-outer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span>\n        <span class=\"token string\">'block'</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.item-modal-inner'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 4. 모달 창 X 클릭 시 모달 닫기</span>\n    <span class=\"token keyword\">const</span> $modalCloseButton <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'.modal-close-button'</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> $modalInner <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.item-modal-inner'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> $modalOuter <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.item-modal-outer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    $modalCloseButton<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      $modalInner<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">;</span>\n      $modalOuter<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">;</span>\n      $modalInner<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.modal-input'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>itemTitle<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 5. 모달 창 save button 클릭 시 내용 변경</span>\n    <span class=\"token keyword\">const</span> $modalSaveButton <span class=\"token operator\">=</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.modal-save-button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> $modalInput <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.modal-input'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> $itemContent <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.item-content'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    $modalSaveButton<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      $modalInner<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">;</span>\n      $modalOuter<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 5-1. 활동 기록에 수정 활동 추가</span>\n      <span class=\"token keyword\">const</span> $record <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $record<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">'record'</span><span class=\"token punctuation\">;</span>\n      $record<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;span class=\"record-important\">@Jayden&lt;/span> changed &lt;b></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>$itemContent<span class=\"token punctuation\">.</span>textContent<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/b> to &lt;span class=\"record-important\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>$modalInput<span class=\"token punctuation\">.</span>value<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/span> in &lt;b></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>containerTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/b></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">const</span> now <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $record<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>timeMakeNote <span class=\"token operator\">=</span> now<span class=\"token punctuation\">;</span>\n      activityLog<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>$record<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      $itemContent<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> $modalInput<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>2-0. 이 부분도 아주 유용하게 사용한 <code class=\"language-text\">early return</code> 패턴!</li>\n<li>2-2. 나를 제일 고생시켰던 녀석… 컴포넌트 별로 shadow dom이 형성되다보니, 컴포넌트에서 다른 컴포넌트를 선택하는 것이 너무 까다로웠다. 특히나, 지금과 같이 컴포넌트가 서로 부모, 자식 관계일 때 자식 컴포넌트의 root 노드가 본인이다보니 그 위로 접근하는 게 불가능했다.(가능한지 정말 열심히 뒤졌지만… shadow dom의 개념을 생각해보면 안되는 게 맞다…) 그래서 결국 dataset을 통해 위에서부터 하나하나 접근하는 방법을 선택했다. 추후에 이 부분을 다르게 해결할 수는 없는지 꼭 알고싶다.</li>\n<li>3 . 이제 모달 창을 만드는 부분은 쉽게 처리할 수 있게 되었다. 역시 계속 해봐야한다.</li>\n</ul>\n<blockquote>\n<p>코멘트를 굳이 남기지 않은 부분들은 앞서 설명한 부분들을 통해 이해할 수 있거나 크게 어렵지 않았던 부분이라 생략하였다.(물론 이 코드들조차도 지저분하지만…)\n일단 기능구현에 초점을 맞춰 프로젝트를 몇번 진행하다보니, 점점 코드 자체에 신경을 쓰고 싶어지고 더더 알아가고 싶은 게 많아진다. 사람 욕심이 참 그런 것 같다.\n천천히 마음 잡고 내가 할 수 있는 선에서 더 나아가면 된다.\n추가로 <code class=\"language-text\">드래그 앤 드랍</code>과 <code class=\"language-text\">다크모드</code>를 구현해볼 예정이다..!</p>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%9D%BC%EC%A7%80\">🔨 프로젝트 일지</a></p>\n<ul>\n<li>\n<p><a href=\"#project-get-shit-done\"><code class=\"language-text\">Project</code>: Get Shit Done</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EB%A1%9C%EC%A7%81\">🤪 컴포넌트 로직</a></p>\n<ul>\n<li><a href=\"#-todonote\">🧭 todoNote</a></li>\n<li><a href=\"#-todoitem\">🧭 todoItem</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"September 26, 2022","title":"GetShitDone-3","categories":"프로젝트","author":"제이든","emoji":"🔨"},"fields":{"slug":"/from-time-to-time/project/getshitdone/3.component-logic2/"}},"prev":{"id":"6b7dc1a8-ee7f-55e2-b7d1-bb082a34fcc7","html":"<h2 id=\"-프로젝트-일지\" style=\"position:relative;\"><a href=\"#-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%9D%BC%EC%A7%80\" aria-label=\" 프로젝트 일지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔨 프로젝트 일지</h2>\n<blockquote>\n<p>정보 전달보단 프로젝트를 진행하며 겪은 점들, 느낀 점들을 기록한 일지</p>\n</blockquote>\n<h3 id=\"code-classlanguage-textprojectcode-get-shit-done\" style=\"position:relative;\"><a href=\"#code-classlanguage-textprojectcode-get-shit-done\" aria-label=\"code classlanguage textprojectcode get shit done permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">Project</code>: Get Shit Done</h3>\n<p>나만의 ToDo리스트를 만들기 위해 시작한 프로젝트<br/>\n<code class=\"language-text\">Get Shit Done</code>은 <code class=\"language-text\">그냥 닥치고 해</code>라는 의미로 평상시 스스로 다짐하는 문장인데, 투두리스트와 어울린다 생각하여 프로젝트명으로 정하게 되었다.<br/>\n이번 프로젝트의 가장 큰 목적과 의의는 웹팩 및 바벨을 통해 각 모듈을 <code class=\"language-text\">웹 컴포넌트</code>로 구성하여 동작하게 하는 것이다!!!</p>\n<h4 id=\"-drag--drop\" style=\"position:relative;\"><a href=\"#-drag--drop\" aria-label=\" drag  drop permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤮 drag &#x26; drop</h4>\n<p>드디어 드래그 앤 드랍이다.<br/>\n솔직히 프로젝트 처음 시작 때, 웹 컴포넌트에 대해 이해하려고 노력할 때만 해도 ‘드래그 앤 드랍은 구현하기 힘들겠다’ 생각했다.<br/>\n처음엔 아예 API없이 구현을 해보려했을나, 뭔가 그 느낌은 좀 알겠는데… 계속 시도해보다가 깔끔하게 API를 이용하여 구현해보자 마음 먹었다.<br/>\n근데 웬걸, API를 통해 구현하는 것도 쉬운 일이 아니었나…!</p>\n<blockquote>\n<p>이 모든 어려움의 원흉은 Shadow DOM 자식이었ㄷ…(물론 컴포넌트를 얼마나 잘 나누고 역할을 부여하는 게 소중한지 알 수 있었지만 ㅠ)</p>\n</blockquote>\n<p>먼저 드래그 앤 드랍 API를 통해 기능을 구현할래도, 각각의 컴포넌트가 독립적인 DOM을 가져버리는 바람에 drag 혹은 drop 이벤트 시 드래그한 타겟과 드랍될 공간을 타겟하는 게 번거로웠다.<br/></p>\n<p>🌶️ 매우매우 지저분한 코드들이 등장하니 주의</p>\n<h5 id=\"1-itemmemo가-있는-메모장으로-drag--drop\" style=\"position:relative;\"><a href=\"#1-itemmemo%EA%B0%80-%EC%9E%88%EB%8A%94-%EB%A9%94%EB%AA%A8%EC%9E%A5%EC%9C%BC%EB%A1%9C-drag--drop\" aria-label=\"1 itemmemo가 있는 메모장으로 drag  drop permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. item(memo)가 있는 메모장으로 drag &#x26; drop</h5>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 1) 아이템 즉, 메모가 존재하는 메모장끼리 드래그 앤 드랍</span>\n<span class=\"token comment\">// todoItem.js</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'draggable'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'true'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 드래그 시작 시</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dragstart'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> containerTitle <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>containerTitle<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> $todoApp <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todo-app'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> $targetContainer <span class=\"token operator\">=</span> $todoApp<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">[data-container-title=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>containerTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">]</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> $targetList <span class=\"token operator\">=</span> $targetContainer<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todo-list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ⭐ already 클래스는 왜 있을까? 아래에서 그 이유가 나온다!!</span>\n  event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'drag-target'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'already'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  $targetList<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'drag-target'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  $targetContainer<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'drag-target'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>메모에 <code class=\"language-text\">draggable = true</code>를 부여하고 shadow dom으로 인해 추후 drop 시 현재 event.target에 접근할 수 없기에\ndragstart 이벤트가 발생하는 순간, 해당 item 및 상위 요소들(Item, List, Container)에 <code class=\"language-text\">drag-target</code>이라는 클랙스를 더해준다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'drop'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">stopPropagation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// dragstart 발생 시, 더해준 drag-target으로 drag중인 요소 정보를 가져온다.</span>\n  <span class=\"token keyword\">const</span> $todoApp <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todo-app'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> $targetContainer <span class=\"token operator\">=</span> $todoApp<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.drag-target'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> $targetList <span class=\"token operator\">=</span> $targetContainer<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.drag-target'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> $targetItem <span class=\"token operator\">=</span> $targetList<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.drag-target'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// 드래그 했으니 지운다.</span>\n  $targetItem<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 이 아래는 드랍하게 될 Item(메모 요소)의 절반 중앙 윗부분이면 위로, 아랫부분이면 아래로 drop되도록</span>\n  <span class=\"token comment\">// drop되는 노드의 중앙의 clientY와 drop 이벤트 발생 지점의 clientY를 비교하여</span>\n  <span class=\"token comment\">// 구분해서 드랍을 해주었다.</span>\n  <span class=\"token keyword\">const</span> dropTargetClientTop <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span><span class=\"token function\">getBoundingClientRect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>top<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> dropTargetClientBottom <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span><span class=\"token function\">getBoundingClientRect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>bottom<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> dropTargetClientMiddle <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>dropTargetClientTop <span class=\"token operator\">+</span> dropTargetClientBottom<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>clientY <span class=\"token operator\">&lt;</span> dropTargetClientMiddle<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>parentNode<span class=\"token punctuation\">.</span><span class=\"token function\">insertBefore</span><span class=\"token punctuation\">(</span>$targetItem<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>parentNode<span class=\"token punctuation\">.</span><span class=\"token function\">insertBefore</span><span class=\"token punctuation\">(</span>$targetItem<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>nextElementSibling<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  $targetItem<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>containerTitle <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>containerTitle<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// drag &amp; drop 후 각각의 메모장에서 -1, +1 count 해주기</span>\n  <span class=\"token keyword\">const</span> $targetToolbar <span class=\"token operator\">=</span> $targetContainer<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todo-toolbar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> $noteCountBefore <span class=\"token operator\">=</span> $targetToolbar<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.count-item'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  $noteCountBefore<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token operator\">+</span>$noteCountBefore<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> $noteCountAfter <span class=\"token operator\">=</span> document\n    <span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todo-app'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span>\n      <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">[\n            data-container-title=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>containerTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\n          ]</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todo-toolbar'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.count-item'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  $noteCountAfter<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token operator\">+</span>$noteCountAfter<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// drag &amp; drop 기록 남겨주기</span>\n  <span class=\"token keyword\">const</span> $record <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  $record<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">'record'</span><span class=\"token punctuation\">;</span>\n  $record<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;span class=\"record-important\">@Jayden&lt;/span> moved &lt;span class=\"record-item\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>$targetItem<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>itemTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/span> to &lt;span class=\"record-container\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>containerTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/span> from &lt;span class=\"record-container\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>$targetContainer<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>containerTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> now <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  $record<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>timeMakeNote <span class=\"token operator\">=</span> now<span class=\"token punctuation\">;</span>\n  activityLog<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>$record<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// drop 후 drag target에 추가했던 클래스는 지워준다.</span>\n  $targetContainer<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'drag-target'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  $targetList<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'drag-target'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  $targetItem<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'drag-target'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>일단 drag 대상과 drop 대상에 접근하는 게 매우 지저분하지만, 메모장에 메모들이 존재할 때 드래그 앤 드랍을 구현하였다.</p>\n</blockquote>\n<p>헌제, 문제가 발생했다. drag &#x26; drop 후 옮겨진 메모를 삭제, 수정 기능을 실행해보니 해당 이벤트가 2번 발생하는 것이다.<br/>\n처음에 뭐가 문제지..? 하다가 알고보니 drag 후 drop하게 되면 해당 todo-item 태그가 지워졌다가 다시 생성되는 것이기 때문에<br/>\n웹 컴포넌트에서 customElement가 DOM에 추가될 때 실행되는 메서드인 connectedCallback이 실행되게 되고 그에 따라, addEventListener가 한 번 더 실행되는 것이었다.<br/></p>\n<p>이를 해결할 직관적인(?) 단순한 방법은 disconnectedCallback에서 removeEventListener()를 사용하는 것이었다.<br/>\n허나, 이전 코드를 보면 알겠지만 요소에 붙인 이벤트 리스너들이 너무 지저분하고 복잡했다. <br/>\n그러다 번뜩 떠오른 아이디어! drag &#x26; drop을 한 요소에 대해서만 발생하는 현상이니, 해당 요소들을 구분하고 connectedCallback에 early return을 주면 어떨까? 바로 코드를 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// dragstart 이벤트 시 already라는 클래스를 같이 추가해주었다.</span>\nevent<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'drag-target'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'already'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">connectedCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// drag &amp; drop된 태그는 .already가 존재하기에 바로 return된다.</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>className<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>크으… 조잡하지만 뭔가 정말 깔끔하게 코드 몇줄로 해결해서 기분이 좋았다ㅋㅋㅋㅋㅋ</p>\n</blockquote>\n<h5 id=\"2-itemmemo가-없는-빈-메모장으로-drag--drop\" style=\"position:relative;\"><a href=\"#2-itemmemo%EA%B0%80-%EC%97%86%EB%8A%94-%EB%B9%88-%EB%A9%94%EB%AA%A8%EC%9E%A5%EC%9C%BC%EB%A1%9C-drag--drop\" aria-label=\"2 itemmemo가 없는 빈 메모장으로 drag  drop permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. item(memo)가 없는 빈 메모장으로 drag &#x26; drop</h5>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// todoList.js</span>\n<span class=\"token function\">connectedCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dragover'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'drop'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> $todoApp <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todo-app'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> $targetContainer <span class=\"token operator\">=</span>\n        $todoApp<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.drag-target'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> $targetList <span class=\"token operator\">=</span>\n        $targetContainer<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todo-list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> $targetItem <span class=\"token operator\">=</span> $targetList<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.drag-target'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $targetItem<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>$targetItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $targetItem<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>containerTitle <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>containerTitle<span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">const</span> $targetToolbar <span class=\"token operator\">=</span>\n        $targetContainer<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'todo-toolbar'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> $noteCountBefore <span class=\"token operator\">=</span>\n        $targetToolbar<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.count-item'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $noteCountBefore<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token operator\">+</span>$noteCountBefore<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">const</span> $noteCountAfter <span class=\"token operator\">=</span>\n        event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>previousElementSibling<span class=\"token punctuation\">.</span>previousElementSibling<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span>\n          <span class=\"token string\">'.count-item'</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $noteCountAfter<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token operator\">+</span>$noteCountAfter<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">const</span> $record <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $record<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">'record'</span><span class=\"token punctuation\">;</span>\n      $record<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;span class=\"record-important\">@Jayden&lt;/span> moved &lt;span class=\"record-item\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>$targetItem<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>itemTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/span> to &lt;span class=\"record-container\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>containerTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/span> from &lt;span class=\"record-container\"></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>$targetContainer<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>containerTitle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&lt;/span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">const</span> now <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $record<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>timeMakeNote <span class=\"token operator\">=</span> now<span class=\"token punctuation\">;</span>\n      activityLog<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>$record<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      $targetContainer<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'drag-target'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $targetList<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'drag-target'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      $targetItem<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'drag-target'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>이번엔 빈 공간(Item들이 들어갈 List)에 drop 이벤트 리스너를 붙이고 타겟을 찾는 경로(?)만 조금 달려졌을 뿐 위와 거의 로직은 동일하다!</p>\n<hr>\n<h3 id=\"-프로젝트-회고\" style=\"position:relative;\"><a href=\"#-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%ED%9A%8C%EA%B3%A0\" aria-label=\" 프로젝트 회고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔚 프로젝트 회고</h3>\n<p>그동안 html, css, js로만 간단하게 이뤄진 프로젝트만 진행하다가 모듈, 컴포넌트 등의 개념을 도입하면서 새로운 눈을 얻게 된 것 같다.<br/>\n왜 모듈을 사용하는지, 컴포넌트는 뭐고 웹 컴포넌트는 왜 존재하는지부터 더 나아가서 이렇게 기능 별 혹은 UI에 따라 구분지어서 제품을 만드는 게 무슨 의미가 있는지에 대해서 생각해볼 수 있었다. 자연스럽게 객체지향에 대한 개념도 찾아보게 되고 아직은 정리해야할 게 산더미지만 정말 그동안은 볼 수 없었던 세상을 알게 된 것 같아서 뿌듯하다.<br/>\n또, 코드 자체는 너무나 지저분하지만 목표했던 기능들을 끝까지 구현했다는 점에서 나 자신을 칭찬해주고 싶다.<br/>\n배울 게 많다는 건 때로는 스트레스이고 고통일 수 있겠지만, 나아갈 것이 많다는 의미이기에 설레는 일이기도 한 것 같다.<br/>\n흔히 도서나 영화, 웹툰 등에서 명작을 아직 안본 사람들에게 <code class=\"language-text\">와... 너무 부럽다. 그 명작 안본 뇌 사고 싶다.</code>라는 표현을 쓴다.<br/>\n때로는 아직 모르는 게 너무나 많아 조바심이 나지만, 이렇게 배울 게 많은 지금이 참 소중하고 이런 생각을 하고 있는 내 자신을 더 응원하고 싶다.<br/></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%9D%BC%EC%A7%80\">🔨 프로젝트 일지</a></p>\n<ul>\n<li>\n<p><a href=\"#project-get-shit-done\"><code class=\"language-text\">Project</code>: Get Shit Done</a></p>\n<ul>\n<li>\n<p><a href=\"#-drag--drop\">🤮 drag &#x26; drop</a></p>\n<ul>\n<li><a href=\"#1-itemmemo%EA%B0%80-%EC%9E%88%EB%8A%94-%EB%A9%94%EB%AA%A8%EC%9E%A5%EC%9C%BC%EB%A1%9C-drag--drop\">1. item(memo)가 있는 메모장으로 drag &#x26; drop</a></li>\n<li><a href=\"#2-itemmemo%EA%B0%80-%EC%97%86%EB%8A%94-%EB%B9%88-%EB%A9%94%EB%AA%A8%EC%9E%A5%EC%9C%BC%EB%A1%9C-drag--drop\">2. item(memo)가 없는 빈 메모장으로 drag &#x26; drop</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%ED%9A%8C%EA%B3%A0\">🔚 프로젝트 회고</a></p>\n</li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"September 29, 2022","title":"GetShitDone-4(final)","categories":"프로젝트","author":"제이든","emoji":"🔨"},"fields":{"slug":"/from-time-to-time/project/getshitdone/4.drag-drop/"}},"site":{"siteMetadata":{"siteUrl":"https://JaydenLee1116.github.io","comments":{"utterances":{"repo":"JaydenLee1116/JaydenLee1116.github.io"}}}}},"pageContext":{"slug":"/from-time-to-time/mentoring/220927-fl-1/","nextSlug":"/from-time-to-time/project/getshitdone/3.component-logic2/","prevSlug":"/from-time-to-time/project/getshitdone/4.drag-drop/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}