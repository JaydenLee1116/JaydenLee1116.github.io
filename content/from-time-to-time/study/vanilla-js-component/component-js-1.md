---
emoji: ğŸ¾
title: (Vanilla JSë¡œ ì›¹ ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸° by í™©ì¤€ì¼ë‹˜) 1í¸
date: '2023-04-19 23:30:00'
author: ì œì´ë“ 
tags: ê¸°ë¡ ì¼ì§€ ì„±ì¥ ë°œì „ ê°œë°œ
categories: ìŠ¤í„°ë””
---

## ğŸ¾ ê¸°ìˆ ì±… ìŠ¤í„°ë””

23ë…„ 1ì›”ë¶€í„° í™œë™ ì¤‘ì¸ êµìœ¡ì—ì„œ, ëœ»ì´ ë§ëŠ” ë™ë£Œë“¤ê³¼ í•¨ê»˜ ì§„í–‰í•˜ê²Œ ëœ ìŠ¤í„°ë””<br/>
ì•ìœ¼ë¡œë„ ê¾¸ì¤€íˆ ê¸°ìˆ  ì„œì ì„ ì½ê³  í•¨ê»˜ ë°œì „í•˜ëŠ” ì‹œê°„ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤!

## ë“¤ì–´ê°€ê¸°ì— ì•ì„œ

ì´ ë‚´ìš©ì€ [ê°œë°œì í™©ì¤€ì¼ - Vanilla Javascriptë¡œ ì›¹ ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸° 1í¸](https://junilhwang.github.io/TIL/Javascript/Design/Vanilla-JS-Component/)ì„
ê³µë¶€í•˜ë©° ì‘ì„±í•œ ê¸€ì…ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ë‚´ìš©ì„ í™©ì¤€ì¼ë‹˜ì˜ ë¸”ë¡œê·¸ë¥¼ ì°¸ê³ í•˜ì˜€ê³  ëª‡ê°œì˜ ê°œë… ë‚´ìš© ì •ë„ë§Œ ì¶”ê°€ í˜¹ì€ ë‚´ìš© ìš”ì•½ì´ ë˜ì–´ìˆìŠµë‹ˆë‹¤. ìì„¸í•œ ì‚¬í•­ì€ í™©ì¤€ì¼ë‹˜ì˜ ë¸”ë¡œê·¸ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”!(ì •ë§ ë„ˆë¬´ ì¢‹ì€ ê¸€ì´ì—ìš”~!)

# Vanilla Javascriptë¡œ ì›¹ ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸° - 1

## 1. ì»´í¬ë„ŒíŠ¸ì™€ ìƒíƒœê´€ë¦¬

### í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì§•

- ì›¹ ì œì‘ ì‹œì— ëª¨ë“  ë¸Œë¼ìš°ì €ì—ì„œ ê¹¨ì§€ì§€ ì•Šê³  ì˜ë„í•œ ëŒ€ë¡œ ì˜¬ë°”ë¥´ê²Œ ë‚˜ì˜¤ëŠ” ì‘ì—…(í˜¸í™˜ì„± í•´ê²°)
- í‘œì¤€ ì›¹ ê¸°ìˆ ì„ ì±„ìš©í•˜ì—¬ ë‹¤ë¥¸ ê¸°ì¢… í˜¹ì€ í”Œë«í¼ì— ë”°ë¼ ë‹¬ë¦¬ êµ¬í˜„ë˜ëŠ” ê¸°ìˆ ì„ ë¹„ìŠ·í•˜ê²Œ ë§Œë“¦ê³¼ ë™ì‹œì— ì–´ëŠ í•œìª½ìœ¼ë¡œ ìµœì í™” ë˜ì–´ ì¹˜ìš°ì¹˜ì§€ ì•Šë„ë¡ ê³µí†µ ìš”ì†Œë¥¼ ì‚¬ìš©í•˜ì—¬ ì›¹í˜ì´ì§€ë¥¼ ì œì‘í•˜ëŠ” ê¸°
- ë‹¨ìˆœí•˜ê²Œ ë§í•˜ìë©´ ì»´í“¨í„°, ìŠ¤ë§ˆíŠ¸í° ë“±ë“± ì–´ë–¤ ê¸°ê¸°ë¡œ ì ‘ì†í•´ë„ ì‚¬ìš©ìê°€ ë™ì¼í•œ ê²½í—˜ì„ í•  ìˆ˜ ìˆê²Œë” í•´ì£¼ëŠ” ê²ƒì´ë‹¤.

### GraphQL(Graph Query Language; gql)

- sqlê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì¿¼ë¦¬ ì–¸ì–´
- sqlì€ `ë°ì´í„°ë² ì´ìŠ¤`ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ ëª©ì . ì£¼ë¡œ ë°±ì—”ë“œ ì‹œìŠ¤í…œì—ì„œ ì‘ì„±
- gqlì€ `ì›¹ í´ë¼ì´ì–¸íŠ¸`ê°€ ë°ì´í„°ë¥¼ ì„œë²„ë¡œë¶€í„° íš¨ìœ¨ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ ì£¼ëœ ëª©ì . ì£¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ì‹œìŠ¤í…œì—ì„œ ì‘ì„±


### í´ë¼ì´ì–¸íŠ¸ ë Œë”ë§ì˜ íë¦„

ë¸Œë¼ìš°ì €ì™€ JSê°€ ë°œì „í•˜ëŠ” ê³¼ì •ì—ì„œ ì•„ì˜ˆ `ë¸Œë¼ìš°ì €(í´ë¼ì´ì–¸íŠ¸)ë‹¨ì—ì„œ ë Œë”ë§`ì„ í•˜ê³ , `ì„œë²„ì—ì„œëŠ” REST API ë˜ëŠ” GraphQL ê°™ì´ ë¸Œë¼ìš°ì € ë Œë”ë§ì— í•„ìš”í•œ ë°ì´í„°ë¥¼ ì œê³µí•˜ëŠ” í˜•íƒœ`ë¡œ ë³€í™”í•˜ì˜€ë‹¤.
ì¦‰, ì§ì ‘ì ìœ¼ë¡œ DOMì„ ì¡°ì‘í•˜ëŠ” í–‰ìœ„ê°€ ê¸‰ê²©í•˜ê²Œ ê°ì†Œí–ˆë‹¤. `ìƒíƒœ(state)`ë¥¼ ê¸°ì¤€ìœ¼ë¡œ `DOM`ì„ ë Œë”ë§í•˜ëŠ” í˜•íƒœë¡œ ë°œì „í–ˆë‹¤.
ë‹¤ë¥´ê²Œ ìƒê°í•˜ë©´ DOMì´ ë³€í•˜ëŠ” ê²½ìš°ê°€ Stateì— ì¢…ì†ë˜ì—ˆê³  ì´ ë§ì€ ì¦‰, Stateê°€ ë³€í•˜ì§€ ì•Šì„ ê²½ìš° DOMì´ ë³€í•˜ë©´ ì•ˆëœë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

### SSRê³¼ CSR

#### SSR(Server-Side-Rendering)

- ì„œë²„ì—ì„œ HTMLì„ ë§Œë“¤ì–´ì„œ í´ë¼ì´ì–¸íŠ¸ì— ë„˜ê²¨ì¤€ë‹¤. ë§ ê·¸ëŒ€ë¡œ ì„œë²„ìª½ì—ì„œ ë Œë”ë§ì„ í•œë‹¤.
- ê·¸ë ‡ê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” ë°ì´í„°ë¥¼ ê¹Šì€ ë‹¨ê³„ê¹Œì§€ ê´€ë¦¬í•˜ê³  ë‹¤ë£° í•„ìš”ê°€ ì—†ì—ˆë‹¤.

#### CSR(Client-Side-Rendering)

- JSì˜ ë°œì „ì— ë”°ë¼ í´ë¼ì´ì–¸íŠ¸ ë‹¨ì—ì„œ ëª¨ë“  ë Œë”ë§ì„ ì²˜ë¦¬í•˜ë ¤ëŠ” ì‹œë„ê°€ ìƒê²¼ë‹¤.(React, Vue, Angular ë“±)
- í´ë¼ì´ì–¸íŠ¸ ë‹¨ì—ì„œ ë Œë”ë§ì„ í•˜ê¸° ìœ„í•´, ë Œë”ë§ì— í•„ìš”í•œ ë°ì´í„°(ìƒíƒœ)ë¥¼ ì„¸ë°€í•˜ê²Œ ê´€ë¦¬í•´ì•¼í•  í•„ìš”ê°€ ìƒê²¼ë‹¤.
- ê·¸ë˜ì„œ Reduxì™€ ê°™ì€ ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬(í”„ë ˆì„ì›Œí¬)ê°€ ìƒê²¨ë‚¬ë‹¤.

### ì»´í¬ë„ŒíŠ¸

- Angularê°€ CSRì˜ ì‹œì‘ì´ì—ˆë‹¤ë©´ ReactëŠ” ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ê°œë°œì˜ ì‹œì‘!
- í˜„ ì‹œì ì˜ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ëŒ€ë¶€ë¶„ ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„ë¡œ ì„¤ê³„ë˜ê³  ê°œë°œëœë‹¤.
- ë˜í•œ ì»´í¬ë„ŒíŠ¸ë§ˆë‹¤ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•  ë•Œ í•„ìš”í•œ ìƒíƒœë¥¼ ê´€ë¦¬í•œë‹¤.
  - `Proxy` í˜¹ì€ `Observer Pattern` ë“±ì„ ì´ìš©í•˜ì—¬ êµ¬í˜„í•œë‹¤.

## 2. state - setState - render

### 2-1. êµ¬í˜„í•´ë³´ê¸°

`setState`ë¥¼ í†µí•´ì„œ `state`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ `render`ë¥¼ í•´ì£¼ëŠ” ì½”ë“œë¥¼ ë§Œë“¤ì–´ë³´ê¸°

```html
<div id="app"></div>
<script>
const $app = document.querySelector('#app');

let state = {
  items: ['item1', 'item2', 'item3', 'item4']
}

const render = () => {
  const { items } = state;
  $app.innerHTML = `
    <ul>
      ${items.map(item => `<li>${item}</li>`).join('')}
    </ul>
    <button id="append">ì¶”ê°€</button>
  `;
  document.querySelector('#append').addEventListener('click', () => {
    setState({ items: [ ...items, `item${items.length + 1}` ] })
  })
}

const setState = (newState) => {
  state = { ...state, ...newState };
  render();
}

render();
</script>
```

- `state`ê°€ ë³€ê²½ë˜ë©´ `render`ë¥¼ ì‹¤í–‰í•œë‹¤.
- `state`ëŠ” `setState`ë¡œë§Œ ë³€ê²½í•´ì•¼ í•œë‹¤.

> ìœ„ì˜ 2ê°€ì§€ê°€ ì •ë§ ì •ë§ í•µì‹¬ ë‚´ìš©ì´ë¼ê³  ìƒê°í•œë‹¤.

### 2-2. ì¶”ìƒí™”

class ë¬¸ë²•ìœ¼ë¡œ ì¢€ë” ì¶”ìƒí™”í•´ë³´ì

```html
<div id="app"></div>
<script>
class Component {
  $target;
  state;
  constructor ($target) { 
    this.$target = $target;
    this.setup();
    this.render();
  }
  setup () {};
  template () { return ''; }
  render () {
    this.$target.innerHTML = this.template();
    this.setEvent();
  }
  setEvent () {}
  setState (newState) {
    this.state = { ...this.state, ...newState };
    this.render();
  }
}

class App extends Component {
  setup () {
    this.state = { items: ['item1', 'item2'] };
  }
  template () {
    const { items } = this.state;
    return `
        <ul>
          ${items.map(item => `<li>${item}</li>`).join('')}
        </ul>
        <button>ì¶”ê°€</button>
    `
  }
  
  setEvent () {
    this.$target.querySelector('button').addEventListener('click', () => {
      const { items } = this.state;
      this.setState({ items: [ ...items, `item${items.length + 1}` ] });
    }); 
  }
}

new App(document.querySelector('#app'));
</script>
```

classë¥¼ ì‚¬ìš©í•˜ì—¬ ì¡°ê¸ˆ ë” ìœ ì—°í•˜ê³  ê·¸ëŸ´ë“¯í•œ(?) ì»´í¬ë„ŒíŠ¸ê°€ ì‘ì„±ë˜ì—ˆë‹¤.

### 2-3. ëª¨ë“ˆí™”

ìœ„ì˜ íŒŒì¼ë“¤ì„ ì•„ë˜ì™€ ê°™ì€ êµ¬ì¡°ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.

```shell
.
â”œâ”€â”€ index.html
â””â”€â”€ src
    â”œâ”€â”€ app.js              # ES Moduleì˜ entry file
    â”œâ”€â”€ components          # Component ì—­í• ì„í•˜ëŠ” ê²ƒë“¤
    â”‚   â””â”€â”€ Items.js
    â””â”€â”€ core                # êµ¬í˜„ì— í•„ìš”í•œ ì½”ì–´ë“¤
        â””â”€â”€ Component.js
```

src/core/Component.js

- ì•„ë˜ì™€ ê°™ì´ Component ì—­í• ì„ í•˜ëŠ” classë¥¼ ìƒì„±í•œë‹¤.

```js
export default class Component {
  $target;
  state;
  constructor ($target) {
    this.$target = $target;
    this.setup();
    this.render();
  }
  setup () {};
  template () { return ''; }
  render () {
    this.$target.innerHTML = this.template();
    this.setEvent();
  }
  setEvent () {}
  setState (newState) {
    this.state = { ...this.state, ...newState };
    this.render();
  }
}
```

src/components/Items.js

- ìœ„ì˜ Component classë¥¼ ìƒì†í•˜ì—¬ ì¢€ë” êµ¬ì²´ì ì¸ classë¥¼ êµ¬í˜„í•œë‹¤.

```js
import Component from "../core/Component.js";

export default class Items extends Component {
  setup () {
    this.state = { items: ['item1', 'item2'] };
  }
  template () {
    const { items } = this.state;
    return `
      <ul>
        ${items.map(item => `<li>${item}</li>`).join('')}
      </ul>
      <button>ì¶”ê°€</button>
    `
  }

  setEvent () {
    this.$target.querySelector('button').addEventListener('click', () => {
      const { items } = this.state;
      this.setState({ items: [ ...items, `item${items.length + 1}` ] });
    });
  }
}
```

index.html

- htmlì—ëŠ” ì•„ë˜ì™€ ê°™ì´ entry ì—­í• (app í˜¹ì€ root)ì„ í•˜ëŠ” íƒœê·¸ í•˜ë‚˜ë§Œì´ ì¡´ì¬í•œë‹¤.

```html
<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Simple Component 2</title>
</head>
<body>
<div id="app"></div>
<script src="./src/app.js" type="module"></script>
</body>
</html>
```

src/app.js

- app íƒœê·¸ë¥¼ targetìœ¼ë¡œ í•˜ì—¬ êµ¬í˜„ëœ Itemsë¥¼ ë¶™ì¸ë‹¤.

```js
import Items from "./components/Items.js";

class App {
  constructor() {
    const $app = document.querySelector('#app');
    new Items($app);
  }
}

new App();
```

## 3. ì´ë²¤íŠ¸ ì²˜ë¦¬

### 3-1. ë¶ˆí¸í•¨ ê°ì§€

ì•ì˜ ì½”ë“œë¥¼ ë³´ë©´ render ì‹œë§ˆë‹¤ ìƒˆë¡œìš´ htmlì„ í• ë‹¹í•¨ìœ¼ë¡œ ë‹¤ì‹œ eventë¥¼ ë“±ë¡í•´ì£¼ì–´ì•¼ í•œë‹¤. ë˜í•œ ë°˜ë³µì ì¸ ìš”ì†Œì— ëŒ€í•´ì„œ ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í•´ì£¼ì–´ì•¼í•  ë•ŒëŠ” ë” ë¶ˆí¸í•˜ë‹¤.
ì˜ˆë¥¼ ë“¤ì–´ ê°ê°ì˜ ì•„ì´í…œì„ ì‚­ì œí•˜ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í•œë‹¤ê³  í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

```js
import Component from "../core/Component.js";

export default class Items extends Component {
  setup () {
    this.state = { items: ['item1', 'item2'] };
  }
  template () {
    const { items } = this.state;
    return `
      <ul>
        ${items.map((item, key) => `
          <li>
            ${item}
            <button class="deleteBtn" data-index="${key}">ì‚­ì œ</button>
          </li>
        `).join('')}
      </ul>
      <button class="addBtn">ì¶”ê°€</button>
    `
  }

  setEvent () {
    this.$target.querySelector('.addBtn').addEventListener('click', () => {
      const { items } = this.state;
      this.setState({ items: [ ...items, `item${items.length + 1}` ] });
    });
    // ì•„ë˜ì™€ ê°™ì´ ëª¨ë“  deleteBtnì— ëŒ€í•´ì„œ ë‹¤ì†Œ ë³µì¡í•œ í•¸ë“¤ëŸ¬ë¥¼ ì „ë‹¬í•´ì•¼í•œë‹¤.
    this.$target.querySelectorAll('.deleteBtn').forEach(deleteBtn =>
      deleteBtn.addEventListener('click', ({ target }) => {
        const items = [ ...this.state.items ];
        items.splice(target.dataset.index, 1);
        this.setState({ items });
      }))
  }
}
```

### 3-2. ì´ë²¤íŠ¸ ë²„ë¸”ë§

```js
export default class Items extends Component {
  setup () {/* ìƒëµ */}
  template () { /* ìƒëµ */}
  setEvent () {
    // ëª¨ë“  ì´ë²¤íŠ¸ë¥¼ this.$targetì— ë“±ë¡í•˜ì—¬ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
    // ì—¬ê¸°ì„œ { target } ì—ì„œ targetì€ e.targetì´ ëœë‹¤.
    this.$target.addEventListener('click', ({ target }) => {
      const items = [ ...this.state.items ];

      if (target.classList.contains('addBtn')) {
        this.setState({ items: [ ...items, `item${items.length + 1}` ] });
      }

      if (target.classList.contains('deleteBtn')) {
        items.splice(target.dataset.index, 1);
        this.setState({ items });
      }

    });
  }
}
```

ìœ„ì™€ ê°™ì´ ì´ë²¤íŠ¸ ë²„ë¸”ë§ì„ ì´ìš©í•˜ê¸° ìœ„í•´ $target(ì»´í¬ë„ŒíŠ¸ê°€ ë¶™ê²Œ ë˜ëŠ” element)ì— ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í–ˆê¸° ë•Œë¬¸ì— ì´ì œ renderë§ˆë‹¤ êµ³ì´ setEventë¥¼ í˜¸ì¶œí•  í•„ìš”ê°€ ì—†ì–´ì§„ë‹¤.

```js
export default class Component {
   $target;
   state;
   constructor ($target) {
     this.$target = $target;
     this.setup();
+    this.setEvent(); // constructorì—ì„œ í•œ ë²ˆë§Œ ì‹¤í–‰í•œë‹¤.
     this.render();
   }
   setup () {};
   template () { return ''; }
   render () {
     this.$target.innerHTML = this.template();
-    this.setEvent(); // render ë•Œë§ˆë‹¤ ì´ë²¤íŠ¸ë¥¼ ë¶™ì¼ í•„ìš”ê°€ ì—†ì–´ì¡Œë‹¤.
   }
   setEvent () {}
   setState (newState) {
     this.state = { ...this.state, ...newState };
     this.render();
   }
 }
```

### 3-3. ì´ë²¤íŠ¸ ë²„ë¸”ë§ ì¶”ìƒí™”

```js
export default class Component {
  $target;
  state;
  constructor ($target) { /* ìƒëµ */ }
  setup () { /* ìƒëµ */ }
  template () { /* ìƒëµ */ }
  render () { /* ìƒëµ */ }
  setEvent () { /* ìƒëµ */ }
  setState (newState) { /* ìƒëµ */ }

  addEvent (eventType, selector, callback) {
    const children = [...this.$target.querySelectorAll(selector)];
    this.$target.addEventListener(eventType, event => {
      if (!event.target.closest(selector)) return false;
      callback(event);
    })
  }
}

export default class Items extends Component {
  setup () { /* ìƒëµ */ }
  template () {/* ìƒëµ */ }
  setEvent () {
    this.addEvent('click', '.addBtn', ({ target }) => {
      const { items } = this.state;
      this.setState({ items: [ ...items, `item${items.length + 1}` ] });
    });
    this.addEvent('click', '.deleteBtn', ({ target }) => {
      const items = [ ...this.state.items ];
      items.splice(target.dataset.index, 1);
      this.setState({ items });
    });
  }
}
```

## 4. ì»´í¬ë„ŒíŠ¸ ë¶„í• í•˜ê¸°

### 4-1. ê¸°ëŠ¥ ì¶”ê°€

í˜„ì¬ì˜ ì½”ë“œê¹Œì§€ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶„ë¦¬í•  ì´ìœ ê°€ ì—†ê¸°ì—, `toggle`, `filter` ë“±ì˜ ê¸°ëŠ¥ì„ ì¶”ê°€

```js
export default class Items extends Component {
  get filteredItems () {
    const { isFilter, items } = this.state;
    return items.filter(({ active }) => (isFilter === 1 && active) ||
                                        (isFilter === 2 && !active) ||
                                        isFilter === 0);
  }

  setup() {
    this.state = {
      isFilter: 0,
      items: [
        {
          seq: 1,
          contents: 'item1',
          active: false,
        },
        {
          seq: 2,
          contents: 'item2',
          active: true,
        }
      ]
    };
  }

  template() {
    return `
      <header>
        <input type="text" class="appender" placeholder="ì•„ì´í…œ ë‚´ìš© ì…ë ¥" />
      </header>
      <main>
        <ul>
          ${this.filteredItems.map(({contents, active, seq}) => `
            <li data-seq="${seq}">
              ${contents}
              <button class="toggleBtn" style="color: ${active ? '#09F' : '#F09'}">
                ${active ? 'í™œì„±' : 'ë¹„í™œì„±'}
              </button>
              <button class="deleteBtn">ì‚­ì œ</button>
            </li>
          `).join('')}
        </ul>
      </main>
      <footer>
        <button class="filterBtn" data-is-filter="0">ì „ì²´ ë³´ê¸°</button>
        <button class="filterBtn" data-is-filter="1">í™œì„± ë³´ê¸°</button>
        <button class="filterBtn" data-is-filter="2">ë¹„í™œì„± ë³´ê¸°</button>
      </footer>
    `
  }

  setEvent() {
    this.addEvent('keyup', '.appender', ({ key, target }) => {
      if (key !== 'Enter') return;
      const {items} = this.state;
      const seq = Math.max(0, ...items.map(v => v.seq)) + 1;
      const contents = target.value;
      const active = false;
      this.setState({
        items: [
          ...items,
          {seq, contents, active}
        ]
      });
    });

    this.addEvent('click', '.deleteBtn', ({target}) => {
      const items = [ ...this.state.items ];;
      const seq = Number(target.closest('[data-seq]').dataset.seq);
      items.splice(items.findIndex(v => v.seq === seq), 1);
      this.setState({items});
    });

    this.addEvent('click', '.toggleBtn', ({target}) => {
      const items = [ ...this.state.items ];
      const seq = Number(target.closest('[data-seq]').dataset.seq);
      const index = items.findIndex(v => v.seq === seq);
      items[index].active = !items[index].active;
      this.setState({items});
    });

    this.addEvent('click', '.filterBtn', ({ target }) => {
      this.setState({ isFilter: Number(target.dataset.isFilter) });
    });
  }
}
```

í¬ê²Œ ë³´ë©´ ì´ê²ƒë„ ì»´í¬ë„ŒíŠ¸ë¼ê³  ë³¼ ìˆ˜ ìˆì§€ë§Œ, ì»´í¬ë„ŒíŠ¸ë¥¼ ë‚˜ëˆ„ëŠ” ê¸°ë³¸ì ì¸ ì´ìœ ì¸ `ì¬í™œìš©`ì´ ì‚¬ì‹¤ìƒ ì–´ë µë‹¤.
í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ê°€ ìµœëŒ€í•œ ì‘ì€ ì¼ì„ í•˜ë„ë¡ í•´ì•¼ ì¶”í›„ì— ì¬í™œìš©í•˜ê¸° ì¢‹ë‹¤.

### 4-2. í´ë” êµ¬ì¡°

í•œ ë²ˆ ë” ë¶„ë¦¬í•˜ì—¬ ì¢€ë” ì„¸ë°€í•˜ê²Œ êµ¬ì¡°ë¥¼ ë‚˜ëˆ ë³´ì

```shell
.
â”œâ”€â”€ index.html
â””â”€â”€ src
    â”œâ”€â”€ App.js               # mainì—ì„œ App ì»´í¬ë„ŒíŠ¸ë¥¼ ë§ˆìš´íŠ¸í•œë‹¤.
    â”œâ”€â”€ main.js              # jsì˜ entry í¬ì¸íŠ¸
    â”œâ”€â”€ components
    â”‚   â”œâ”€â”€ ItemAppender.js
    â”‚   â”œâ”€â”€ ItemFilter.js
    â”‚   â””â”€â”€ Items.js
    â””â”€â”€ core
        â””â”€â”€ Component.js
```

- App Component ì¶”ê°€
- entry pointë¥¼ app.jsì—ì„œ main.jsë¡œ ë³€ê²½
- `Items`ì—ì„œ `ItemAppender`, `ItemFilter`ì„ ë¶„ë¦¬

### 4-3. Component Core ë³€ê²½(propsì™€ mounted ì¶”ê°€)

```js
export default class Component {
  $target;
  props;
  state;
  constructor ($target, props) {
    this.$target = $target;
    this.props = props; // props í• ë‹¹
    this.setup();
    this.setEvent();
    this.render();
  }
  setup () {};
  mounted () {};
  template () { return ''; }
  render () {
    this.$target.innerHTML = this.template();
    this.mounted(); // render í›„ì— mountedê°€ ì‹¤í–‰ ëœë‹¤.
  }
  setEvent () {}
  setState (newState) { /* ìƒëµ */ }
  addEvent (eventType, selector, callback) { /* ìƒëµ */ }
}
```

- `render` ì´í›„ì— ì–´ë–¤ í•¨ìˆ˜ë“¤ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ `mounted()` ë©”ì„œë“œë¥¼ ì¶”ê°€í•œë‹¤.
- `props`ëŠ” ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ìì‹ ì»´í¬ë„ŒíŠ¸ì—ê²Œ ìƒíƒœ í˜¹ì€ ë©”ì„œë“œë¥¼ ë„˜ê²¨ì£¼ê¸° ìœ„í•¨ì´ë‹¤.

> ë¦¬ì•¡íŠ¸ì˜ ì»´í¬ë„ŒíŠ¸ëŠ” `ìƒëª…ì£¼ê¸°`ë¥¼ ê°–ëŠ”ë‹¤. ë‹¨ìˆœí•˜ê²Œ `ìƒì„± -> ì—…ë°ì´íŠ¸ -> ì œê±°`ì˜ ì‚¶ì„ ì‚´ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.<br/>
> ì´ ë•Œ, ìƒì„± ë‹¨ê³„ê°€ `mounting` ë‹¨ê³„ì´ë‹¤. ì´ ë‹¨ê³„ì—ì„œëŠ” Component í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê³  ê²°ê³¼ë¬¼ë¡œ ë‚˜ì˜¨ Elementê°€ ê°€ìƒ DOMì— ì‚½ì…ë˜ê³  ì‹¤ì œ DOMì„ ì—…ë°ì´íŠ¸í•˜ê¸°ê¹Œì§€ì˜ ê³¼ì •ì´ ì¼ì–´ë‚œë‹¤.

### 4-4. Entry Point ë³€ê²½



```html
 <!doctype html>
 <html lang="ko">
 <head>
   <meta charset="UTF-8">
   <title>Simple Component 8</title>
 </head>
 <body>
 <h1>Example #8</h1>
 <div id="app"></div>
-<script src="src/app.js" type="module"></script>
+<script src="src/main.js" type="module"></script>
 </body>
 </html>
```

```js
import App from './App.js';

new App(document.querySelector('#app'));
```

> ì†”ì§íˆ ì´ ê¸€ì—ì„œ ìœ„ì™€ ê°™ì´ entry pointë¥¼ ë³€ê²½í•œ ëª…í™•í•œ ì´ìœ ëŠ” ëª¨ë¥´ê² ë‹¤.<br/>
> ì¼ë‹¨ ì´ë ‡ê²Œ Appë„ í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ë¶„í•´ì£¼ë©´ ì¬í™œìš©ì„±ì´ ë†’ì•„ì§„ë‹¤ëŠ” ì , ì¶”í›„ì— App ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì—ì„œ ì–´ë–¤ ì‘ì—…ì„ í•  ë•Œ ì¶”ê°€í•˜ê¸° í¸í•˜ë‹¤ëŠ” ì  ì •ë„..?!<br/>
> ì˜ˆë¥¼ ë“¤ì–´ ë¦¬ì•¡íŠ¸ì˜ ê²½ìš°ë„ ì•„ë˜ì™€ ê°™ì´ ì²˜ë¦¬ê°€ ë˜ì–´ìˆìœ¼ë‹ˆ ë§ì´ë‹¤.

```jsx
const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode> // ì´ë ‡ê²Œ strict modeë¥¼ ê±¸ì–´ì£¼ê³  ì‹¶ì„ ë•Œ
    <App />
  </React.StrictMode>
);
```

### 4-5. ì»´í¬ë„ŒíŠ¸ ë¶„í• 

ê¸°ì¡´ Itemsì— ì¡´ì¬í•˜ë˜ ë¡œì§ì„ Appìœ¼ë¡œ ë„˜ê¸°ê³  Appì—ì„œ ì—¬ëŸ¬ ë©”ì„œë“œë¥¼ ê´€ë¦¬í•˜ë©° í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë“¤(Items, ItemAppender, ItemFilter)ì—ê²Œ propsë¡œ ë„˜ê²¨ì¤€ë‹¤.

```js
import Component from "./core/Component.js";
import Items from "./components/Items.js";
import ItemAppender from "./components/ItemAppender.js";
import ItemFilter from "./components/ItemFilter.js";

export default class App extends Component {

  setup () {
    this.state = {
      isFilter: 0,
      items: [
        {
          seq: 1,
          contents: 'item1',
          active: false,
        },
        {
          seq: 2,
          contents: 'item2',
          active: true,
        }
      ]
    };
  }

  template () {
    return `
      <header data-component="item-appender"></header>
      <main data-component="items"></main>
      <footer data-component="item-filter"></footer>
    `;
  }

  // mountedì—ì„œ ìì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§ˆìš´íŠ¸ í•´ì¤˜ì•¼ í•œë‹¤.
  mounted () {
    const { filteredItems, addItem, deleteItem, toggleItem, filterItem } = this;
    const $itemAppender = this.$target.querySelector('[data-component="item-appender"]');
    const $items = this.$target.querySelector('[data-component="items"]');
    const $itemFilter = this.$target.querySelector('[data-component="item-filter"]');

    // í•˜ë‚˜ì˜ ê°ì²´ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë©”ì†Œë“œë¥¼ ë„˜ê²¨ì¤„ bindë¥¼ ì‚¬ìš©í•˜ì—¬ thisë¥¼ ë³€ê²½í•˜ê±°ë‚˜,
    // ë‹¤ìŒê³¼ ê°™ì´ ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì¤˜ì•¼ í•œë‹¤.
    // ex) { addItem: contents => addItem(contents) }
    new ItemAppender($itemAppender, {
      addItem: addItem.bind(this)
    });
    new Items($items, {
      filteredItems,
      deleteItem: deleteItem.bind(this),
      toggleItem: toggleItem.bind(this),
    });
    new ItemFilter($itemFilter, {
      filterItem: filterItem.bind(this)
    });
  }

  get filteredItems () {
    const { isFilter, items } = this.state;
    return items.filter(({ active }) => (isFilter === 1 && active) ||
      (isFilter === 2 && !active) ||
      isFilter === 0);
  }

  addItem (contents) {
    const {items} = this.state;
    const seq = Math.max(0, ...items.map(v => v.seq)) + 1;
    const active = false;
    this.setState({
      items: [
        ...items,
        {seq, contents, active}
      ]
    });
  }

  deleteItem (seq) {
    const items = [ ...this.state.items ];;
    items.splice(items.findIndex(v => v.seq === seq), 1);
    this.setState({items});
  }

  toggleItem (seq) {
    const items = [ ...this.state.items ];
    const index = items.findIndex(v => v.seq === seq);
    items[index].active = !items[index].active;
    this.setState({items});
  }

  filterItem (isFilter) {
    this.setState({ isFilter });
  }

}
```

```js
import Component from "../core/Component.js";

export default class ItemAppender extends Component {

  template() {
    return `<input type="text" class="appender" placeholder="ì•„ì´í…œ ë‚´ìš© ì…ë ¥" />`;
  }

  setEvent() {
    const { addItem } = this.props; // ì´ë ‡ê²Œ propsë¥¼ í†µí•´ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì „ë‹¬í•œë‹¤.
    this.addEvent('keyup', '.appender', ({ key, target }) => {
      if (key !== 'Enter') return;
      addItem(target.value);
    });
  }
}
```

```js
import Component from "../core/Component.js";

export default class Items extends Component {

  template() {
    const { filteredItems } = this.props;
    return `
      <ul>
        ${filteredItems.map(({contents, active, seq}) => `
          <li data-seq="${seq}">
            ${contents}
            <button class="toggleBtn" style="color: ${active ? '#09F' : '#F09'}">
              ${active ? 'í™œì„±' : 'ë¹„í™œì„±'}
            </button>
            <button class="deleteBtn">ì‚­ì œ</button>
          </li>
        `).join('')}
      </ul>
    `
  }

  setEvent() {
    const { deleteItem, toggleItem } = this.props;

    this.addEvent('click', '.deleteBtn', ({target}) => {
      deleteItem(Number(target.closest('[data-seq]').dataset.seq));
    });

    this.addEvent('click', '.toggleBtn', ({target}) => {
      toggleItem(Number(target.closest('[data-seq]').dataset.seq));
    });
  }
}
```

```js
import Component from "../core/Component.js";

export default class ItemFilter extends Component {

  template() {
    return `
      <button class="filterBtn" data-is-filter="0">ì „ì²´ ë³´ê¸°</button>
      <button class="filterBtn" data-is-filter="1">í™œì„± ë³´ê¸°</button>
      <button class="filterBtn" data-is-filter="2">ë¹„í™œì„± ë³´ê¸°</button>
    `
  }

  setEvent() {
    const { filterItem } = this.props;
    this.addEvent('click', '.filterBtn', ({ target }) => {
      filterItem(Number(target.dataset.isFilter));
    });
  }
}
```

---

## ìŠ¤í„°ë”” ì´í›„

### Template Method Pattern(í…œí”Œë¦¿ ë©”ì„œë“œ íŒ¨í„´)

- ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì˜ ë””ìì¸ íŒ¨í„´ ì¤‘ í•˜ë‚˜
- ì•Œê³ ë¦¬ì¦˜ì˜ êµ¬ì¡°ë¥¼ ë©”ì„œë“œì— ì •ì˜í•˜ê³ , í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ì•Œê³ ë¦¬ì¦˜ êµ¬ì¡°ì˜ ë³€ê²½ì—†ì´ í•´ë‹¹ ì•Œê³ ë¦¬ì¦˜ì„ ì¬ì •ì˜í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´ì´ë‹¤.
- ì•Œê³ ë¦¬ì¦˜ì´ ë‹¨ê³„ë³„ë¡œ ë‚˜ëˆ„ì–´ì§€ëŠ” ê²½ìš° í˜¹ì€ ê°™ì€ ì—­í• ì„ í•˜ëŠ” ë©”ì„œë“œì§€ë§Œ ì—¬ëŸ¬ ê³³ì—ì„œ ë‹¤ë¥¸ í˜•íƒœë¡œ ì‚¬ìš©ì´ í•„ìš”í•œ ê²½ìš° ìœ ìš©í•œ íŒ¨í„´ì´ë‹¤.
- ìƒì†ì„ í†µí•´ì„œ ìŠˆí¼í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ì„ í™•ì¥í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ëŒ€í‘œì ì¸ ë°©ë²•ì´ë‹¤. ë³€í•˜ì§€ ì•ŠëŠ” ê¸°ëŠ¥ì€ ìŠˆí¼ í´ë˜ìŠ¤ì— ë§Œë“¤ì–´ë‘ê³  ìì£¼ ë³€ê²½ë˜ë©° í™•ì¥í•  ê¸°ëŠ¥ì€ ì„œë¸Œ í´ë˜ìŠ¤ì—ì„œ êµ¬í˜„í•œë‹¤.

```ts
class SuperClass {
  constructor() {
    // ì»¨ìŠ¤íŠ¸ëŸ­í„°
  }
  
  superLog() {
    console.log('ìŠˆí¼í´ë˜ìŠ¤ì—ì„œ ì •ì˜í•œ ë©”ì„œë“œ');
    this.subLog();
  }
  
  subLog() {
    console.log('ì„œë¸Œí´ë˜ìŠ¤ì—ì„œ ë³€ê²½í•˜ë©° ì‚¬ìš©í•  ë©”ì„œë“œ')
  }
}

class SubClass extends SuperClass {
  constructor() {
    // ì»¨ìŠ¤íŠ¸ëŸ­í„°
    super();
  }

  subLog() {
    console.log('ì„œë¸Œí´ë˜ìŠ¤ì—ì„œ ì§€ê¸ˆ ë³€ê²½í•œ ë©”ì„œë“œ')
  }
}

const sub = new SubClass();
sub.superLog();

/* log
ìŠˆí¼í´ë˜ìŠ¤ì—ì„œ ì •ì˜í•œ ë©”ì„œë“œ
ì„œë¸Œí´ë˜ìŠ¤ì—ì„œ ì§€ê¸ˆ ë³€ê²½í•œ ë©”ì„œë“œ
 */
```

ìœ„ì™€ ê°™ì´ `SubClass`ë¡œ ìƒì„±ëœ `sub`ê°ì²´ê°€ `superLog`ë¥¼ í˜¸ì¶œí•  ê²½ìš°, SubClassì—ì„œ ì˜¤ë²„ë¼ì´ë”©ëœ `subLog`ê°€ í˜¸ì¶œë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

### reduceëŠ” ì–¸ì œë‚˜ ì¢‹ì„ê¹Œ?(feat. map, join)

ìŠ¤í„°ë””ì›ë§ˆë‹¤ í¸ì•ˆí•œ(?) ê³ ì°¨í•¨ìˆ˜ê°€ ë‹¬ëë‹¤. ì•„ë˜ëŠ” ì´ì•¼ê¸°ë¥¼ ë‚˜ëˆ„ë©° ë‚˜ì˜¨ ì˜ˆì‹œ

```js
const names = ['jayden', 'den', 'zoey', 'lily', 'bakha'];

const literalWithReduce = names.reduce((acc, cur) => {
  return acc + `<li>${cur}</li>`;
}, '');

const literalWithMapJoin = names.map((name) => `<li>${name}</li>`).join('');
```

ì˜ˆì‹œì˜ ê²½ìš° 2ê°€ì§€ ëª¨ë‘ names ë°°ì—´ì˜ ì›ì†Œë“¤ì„ ë°›ì•„ì„œ li íƒœê·¸ í˜•íƒœë¡œ ë§Œë“  í›„ ë¬¸ìì—´ì„ í•©ì¹œ literalì„ ë°˜í™˜í•œë‹¤. ì •ë‹µì€ ì—†ê² ì§€ë§Œ reduceë¥¼ í™œìš©í•˜ëŠ” ê²½ìš°, ê³ ì°¨í•¨ìˆ˜ í•˜ë‚˜ë¡œ ë¬¸ìì—´ì„ ì¶”ê°€í•˜ê³  ê° ë°°ì—´ì˜ ì›ì†Œë¥¼
í•©ì¹  ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ ì•„ì£¼ ì•½ê°„ì˜ ì„±ëŠ¥ ìš°ìœ„ê°€ ìˆì„ ê²ƒ ê°™ë‹¤. ë°˜ë©´ map, joinì€ namesë¼ëŠ” ë°°ì—´ì„ 2ë²ˆ ìˆœíšŒí•˜ê¸°ëŠ” í•˜ì§€ë§Œ, í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì—ì„œ ì§€í–¥í•˜ëŠ” ì„ ì–¸í˜•ì˜ ëŠë‚Œì„ ì •ë§ ì˜ ë³´ì—¬ì¤€ë‹¤ê³  ìƒê°í•œë‹¤.
(ëˆ„ê°€ë´ë„ ë°°ì—´ì— mappingì„ í•˜ê³  joinì„ í†µí•´ ë°°ì—´ì˜ ê° ìš”ì†Œë¥¼ í•©ì³ì£¼ê³  ìˆìœ¼ë‹ˆê¹Œ)

ë‚˜ì˜ ê°œì¸ì ì¸ ê²°ë¡ ì€ ë‹¤ì±„ë¡­ê²Œ í™œìš©ê°€ëŠ¥í•˜ê³  ì„±ëŠ¥ìƒì˜ ìš°ìœ„ë¥¼ ì í•  ìˆ˜ ìˆëŠ” reduceë¥¼ ì‚¬ìš©í•˜ë˜, ê·¸ reduceì— ì „ë‹¬í•˜ëŠ” callbackì„ ë”°ë¡œ ë¶„ë¦¬í•˜ì—¬ ì¢€ë” ëª…í™•í•œ ì´ë¦„ì„ ì§€ì–´ì£¼ëŠ” ê²Œ ì¢‹ë‹¤ëŠ” ê²ƒì´ë‹¤.

```js
const names = ['jayden', 'den', 'zoey', 'lily', 'bakha'];
const getListTags = (acc, cur) => acc + `<li>${cur}</li>`;

const literalWithReduce = names.reduce(getListTags, '');
```



# ì°¸ê³ 

- [ê°œë°œì í™©ì¤€ì¼ - Vanilla Javascriptë¡œ ì›¹ ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸° 1í¸](https://junilhwang.github.io/TIL/Javascript/Design/Vanilla-JS-Component/)
- [í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì§•](https://pxd-fed-blog.web.app/cross-browsing/)
- [ì¹´ì¹´ì˜¤í…Œí¬ - GraphQL ê°œë…ì¡ê¸°](https://tech.kakao.com/2019/08/01/graphql-basic/)
- [ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ ìƒì• ì£¼ê¸° ë‹¤ì´ì–´ê·¸ë¨](https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/)
