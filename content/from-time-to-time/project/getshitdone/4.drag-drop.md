---
emoji: ğŸ”¨
title: GetShitDone-4(final)
date: '2022-09-29 20:30:00'
author: ì œì´ë“ 
tags: ê¸°ë¡ ì¼ì§€ ì„±ì¥ ë°œì „ ê°œë°œ
categories: í”„ë¡œì íŠ¸
---

## ğŸ”¨ í”„ë¡œì íŠ¸ ì¼ì§€

> ì •ë³´ ì „ë‹¬ë³´ë‹¨ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©° ê²ªì€ ì ë“¤, ëŠë‚€ ì ë“¤ì„ ê¸°ë¡í•œ ì¼ì§€

### `Project`: Get Shit Done

ë‚˜ë§Œì˜ ToDoë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ì‹œì‘í•œ í”„ë¡œì íŠ¸<br/>
`Get Shit Done`ì€ `ê·¸ëƒ¥ ë‹¥ì¹˜ê³  í•´`ë¼ëŠ” ì˜ë¯¸ë¡œ í‰ìƒì‹œ ìŠ¤ìŠ¤ë¡œ ë‹¤ì§í•˜ëŠ” ë¬¸ì¥ì¸ë°, íˆ¬ë‘ë¦¬ìŠ¤íŠ¸ì™€ ì–´ìš¸ë¦°ë‹¤ ìƒê°í•˜ì—¬ í”„ë¡œì íŠ¸ëª…ìœ¼ë¡œ ì •í•˜ê²Œ ë˜ì—ˆë‹¤.<br/>
ì´ë²ˆ í”„ë¡œì íŠ¸ì˜ ê°€ì¥ í° ëª©ì ê³¼ ì˜ì˜ëŠ” ì›¹íŒ© ë° ë°”ë²¨ì„ í†µí•´ ê° ëª¨ë“ˆì„ `ì›¹ ì»´í¬ë„ŒíŠ¸`ë¡œ êµ¬ì„±í•˜ì—¬ ë™ì‘í•˜ê²Œ í•˜ëŠ” ê²ƒì´ë‹¤!!!

#### ğŸ¤® drag & drop

ë“œë””ì–´ ë“œë˜ê·¸ ì•¤ ë“œëì´ë‹¤.<br/>
ì†”ì§íˆ í”„ë¡œì íŠ¸ ì²˜ìŒ ì‹œì‘ ë•Œ, ì›¹ ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•´ ì´í•´í•˜ë ¤ê³  ë…¸ë ¥í•  ë•Œë§Œ í•´ë„ 'ë“œë˜ê·¸ ì•¤ ë“œëì€ êµ¬í˜„í•˜ê¸° í˜ë“¤ê² ë‹¤' ìƒê°í–ˆë‹¤.<br/>
ì²˜ìŒì—” ì•„ì˜ˆ APIì—†ì´ êµ¬í˜„ì„ í•´ë³´ë ¤í–ˆì„ë‚˜, ë­”ê°€ ê·¸ ëŠë‚Œì€ ì¢€ ì•Œê² ëŠ”ë°... ê³„ì† ì‹œë„í•´ë³´ë‹¤ê°€ ê¹”ë”í•˜ê²Œ APIë¥¼ ì´ìš©í•˜ì—¬ êµ¬í˜„í•´ë³´ì ë§ˆìŒ ë¨¹ì—ˆë‹¤.<br/>
ê·¼ë° ì›¬ê±¸, APIë¥¼ í†µí•´ êµ¬í˜„í•˜ëŠ” ê²ƒë„ ì‰¬ìš´ ì¼ì´ ì•„ë‹ˆì—ˆë‚˜...!

> ì´ ëª¨ë“  ì–´ë ¤ì›€ì˜ ì›í‰ì€ Shadow DOM ìì‹ì´ì—ˆã„·...(ë¬¼ë¡  ì»´í¬ë„ŒíŠ¸ë¥¼ ì–¼ë§ˆë‚˜ ì˜ ë‚˜ëˆ„ê³  ì—­í• ì„ ë¶€ì—¬í•˜ëŠ” ê²Œ ì†Œì¤‘í•œì§€ ì•Œ ìˆ˜ ìˆì—ˆì§€ë§Œ ã… )

ë¨¼ì € ë“œë˜ê·¸ ì•¤ ë“œë APIë¥¼ í†µí•´ ê¸°ëŠ¥ì„ êµ¬í˜„í• ë˜ë„, ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸ê°€ ë…ë¦½ì ì¸ DOMì„ ê°€ì ¸ë²„ë¦¬ëŠ” ë°”ëŒì— drag í˜¹ì€ drop ì´ë²¤íŠ¸ ì‹œ ë“œë˜ê·¸í•œ íƒ€ê²Ÿê³¼ ë“œëë  ê³µê°„ì„ íƒ€ê²Ÿí•˜ëŠ” ê²Œ ë²ˆê±°ë¡œì› ë‹¤.<br/>

ğŸŒ¶ï¸ ë§¤ìš°ë§¤ìš° ì§€ì €ë¶„í•œ ì½”ë“œë“¤ì´ ë“±ì¥í•˜ë‹ˆ ì£¼ì˜

##### 1. item(memo)ê°€ ìˆëŠ” ë©”ëª¨ì¥ìœ¼ë¡œ drag & drop

```js
// 1) ì•„ì´í…œ ì¦‰, ë©”ëª¨ê°€ ì¡´ì¬í•˜ëŠ” ë©”ëª¨ì¥ë¼ë¦¬ ë“œë˜ê·¸ ì•¤ ë“œë
// todoItem.js
this.setAttribute('draggable', 'true');

// ë“œë˜ê·¸ ì‹œì‘ ì‹œ
this.addEventListener('dragstart', (event) => {
  const containerTitle = event.target.dataset.containerTitle;
  const $todoApp = document.querySelector('todo-app');
  const $targetContainer = $todoApp.shadowRoot.querySelector(
    `[data-container-title=${containerTitle}]`,
  );
  const $targetList = $targetContainer.shadowRoot.querySelector('todo-list');
  // â­ already í´ë˜ìŠ¤ëŠ” ì™œ ìˆì„ê¹Œ? ì•„ë˜ì—ì„œ ê·¸ ì´ìœ ê°€ ë‚˜ì˜¨ë‹¤!!
  event.target.classList.add('drag-target', 'already');
  $targetList.classList.add('drag-target');
  $targetContainer.classList.add('drag-target');
});
```

> ë©”ëª¨ì— `draggable = true`ë¥¼ ë¶€ì—¬í•˜ê³  shadow domìœ¼ë¡œ ì¸í•´ ì¶”í›„ drop ì‹œ í˜„ì¬ event.targetì— ì ‘ê·¼í•  ìˆ˜ ì—†ê¸°ì—
> dragstart ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ëŠ” ìˆœê°„, í•´ë‹¹ item ë° ìƒìœ„ ìš”ì†Œë“¤(Item, List, Container)ì— `drag-target`ì´ë¼ëŠ” í´ë™ìŠ¤ë¥¼ ë”í•´ì¤€ë‹¤.

```js
this.addEventListener('drop', (event) => {
  event.preventDefault();
  event.stopPropagation();
  // dragstart ë°œìƒ ì‹œ, ë”í•´ì¤€ drag-targetìœ¼ë¡œ dragì¤‘ì¸ ìš”ì†Œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
  const $todoApp = document.querySelector('todo-app');
  const $targetContainer = $todoApp.shadowRoot.querySelector('.drag-target');
  const $targetList = $targetContainer.shadowRoot.querySelector('.drag-target');
  const $targetItem = $targetList.shadowRoot.querySelector('.drag-target');
  // ë“œë˜ê·¸ í–ˆìœ¼ë‹ˆ ì§€ìš´ë‹¤.
  $targetItem.remove();

  // ì´ ì•„ë˜ëŠ” ë“œëí•˜ê²Œ ë  Item(ë©”ëª¨ ìš”ì†Œ)ì˜ ì ˆë°˜ ì¤‘ì•™ ìœ—ë¶€ë¶„ì´ë©´ ìœ„ë¡œ, ì•„ë«ë¶€ë¶„ì´ë©´ ì•„ë˜ë¡œ dropë˜ë„ë¡
  // dropë˜ëŠ” ë…¸ë“œì˜ ì¤‘ì•™ì˜ clientYì™€ drop ì´ë²¤íŠ¸ ë°œìƒ ì§€ì ì˜ clientYë¥¼ ë¹„êµí•˜ì—¬
  // êµ¬ë¶„í•´ì„œ ë“œëì„ í•´ì£¼ì—ˆë‹¤.
  const dropTargetClientTop = event.target.getBoundingClientRect().top;
  const dropTargetClientBottom = event.target.getBoundingClientRect().bottom;
  const dropTargetClientMiddle = (dropTargetClientTop + dropTargetClientBottom) / 2;
  if (event.clientY < dropTargetClientMiddle) {
    event.target.parentNode.insertBefore($targetItem, event.target);
  } else {
    event.target.parentNode.insertBefore($targetItem, event.target.nextElementSibling);
  }
  $targetItem.dataset.containerTitle = event.target.dataset.containerTitle;

  // drag & drop í›„ ê°ê°ì˜ ë©”ëª¨ì¥ì—ì„œ -1, +1 count í•´ì£¼ê¸°
  const $targetToolbar = $targetContainer.shadowRoot.querySelector('todo-toolbar');
  const $noteCountBefore = $targetToolbar.shadowRoot.querySelector('.count-item');
  $noteCountBefore.textContent = +$noteCountBefore.textContent - 1;

  const $noteCountAfter = document
    .querySelector('todo-app')
    .shadowRoot.querySelector(
      `[
            data-container-title=${event.target.dataset.containerTitle}
          ]`,
    )
    .shadowRoot.querySelector('todo-toolbar')
    .shadowRoot.querySelector('.count-item');
  $noteCountAfter.textContent = +$noteCountAfter.textContent + 1;

  // drag & drop ê¸°ë¡ ë‚¨ê²¨ì£¼ê¸°
  const $record = document.createElement('div');
  $record.className = 'record';
  $record.innerHTML = `<span class="record-important">@Jayden</span> moved <span class="record-item">${$targetItem.dataset.itemTitle}</span> to <span class="record-container">${event.target.dataset.containerTitle}</span> from <span class="record-container">${$targetContainer.dataset.containerTitle}</span>`;

  const now = Date.now();
  $record.dataset.timeMakeNote = now;
  activityLog.push($record);

  // drop í›„ drag targetì— ì¶”ê°€í–ˆë˜ í´ë˜ìŠ¤ëŠ” ì§€ì›Œì¤€ë‹¤.
  $targetContainer.classList.remove('drag-target');
  $targetList.classList.remove('drag-target');
  $targetItem.classList.remove('drag-target');
});
```

> ì¼ë‹¨ drag ëŒ€ìƒê³¼ drop ëŒ€ìƒì— ì ‘ê·¼í•˜ëŠ” ê²Œ ë§¤ìš° ì§€ì €ë¶„í•˜ì§€ë§Œ, ë©”ëª¨ì¥ì— ë©”ëª¨ë“¤ì´ ì¡´ì¬í•  ë•Œ ë“œë˜ê·¸ ì•¤ ë“œëì„ êµ¬í˜„í•˜ì˜€ë‹¤.

í—Œì œ, ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤. drag & drop í›„ ì˜®ê²¨ì§„ ë©”ëª¨ë¥¼ ì‚­ì œ, ìˆ˜ì • ê¸°ëŠ¥ì„ ì‹¤í–‰í•´ë³´ë‹ˆ í•´ë‹¹ ì´ë²¤íŠ¸ê°€ 2ë²ˆ ë°œìƒí•˜ëŠ” ê²ƒì´ë‹¤.<br/>
ì²˜ìŒì— ë­ê°€ ë¬¸ì œì§€..? í•˜ë‹¤ê°€ ì•Œê³ ë³´ë‹ˆ drag í›„ dropí•˜ê²Œ ë˜ë©´ í•´ë‹¹ todo-item íƒœê·¸ê°€ ì§€ì›Œì¡Œë‹¤ê°€ ë‹¤ì‹œ ìƒì„±ë˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì—<br/>
ì›¹ ì»´í¬ë„ŒíŠ¸ì—ì„œ customElementê°€ DOMì— ì¶”ê°€ë  ë•Œ ì‹¤í–‰ë˜ëŠ” ë©”ì„œë“œì¸ connectedCallbackì´ ì‹¤í–‰ë˜ê²Œ ë˜ê³  ê·¸ì— ë”°ë¼, addEventListenerê°€ í•œ ë²ˆ ë” ì‹¤í–‰ë˜ëŠ” ê²ƒì´ì—ˆë‹¤.<br/>

ì´ë¥¼ í•´ê²°í•  ì§ê´€ì ì¸(?) ë‹¨ìˆœí•œ ë°©ë²•ì€ disconnectedCallbackì—ì„œ removeEventListener()ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ì—ˆë‹¤.<br/>
í—ˆë‚˜, ì´ì „ ì½”ë“œë¥¼ ë³´ë©´ ì•Œê² ì§€ë§Œ ìš”ì†Œì— ë¶™ì¸ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë“¤ì´ ë„ˆë¬´ ì§€ì €ë¶„í•˜ê³  ë³µì¡í–ˆë‹¤. <br/>
ê·¸ëŸ¬ë‹¤ ë²ˆëœ© ë– ì˜¤ë¥¸ ì•„ì´ë””ì–´! drag & dropì„ í•œ ìš”ì†Œì— ëŒ€í•´ì„œë§Œ ë°œìƒí•˜ëŠ” í˜„ìƒì´ë‹ˆ, í•´ë‹¹ ìš”ì†Œë“¤ì„ êµ¬ë¶„í•˜ê³  connectedCallbackì— early returnì„ ì£¼ë©´ ì–´ë–¨ê¹Œ? ë°”ë¡œ ì½”ë“œë¥¼ ë³´ì.

```js
// dragstart ì´ë²¤íŠ¸ ì‹œ alreadyë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ê°™ì´ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.
event.target.classList.add('drag-target', 'already');

connectedCallback() {
    // drag & dropëœ íƒœê·¸ëŠ” .alreadyê°€ ì¡´ì¬í•˜ê¸°ì— ë°”ë¡œ returnëœë‹¤.
    if (this.className) return;
}
```

> í¬ìœ¼... ì¡°ì¡í•˜ì§€ë§Œ ë­”ê°€ ì •ë§ ê¹”ë”í•˜ê²Œ ì½”ë“œ ëª‡ì¤„ë¡œ í•´ê²°í•´ì„œ ê¸°ë¶„ì´ ì¢‹ì•˜ë‹¤ã…‹ã…‹ã…‹ã…‹ã…‹

##### 2. item(memo)ê°€ ì—†ëŠ” ë¹ˆ ë©”ëª¨ì¥ìœ¼ë¡œ drag & drop

```js
// todoList.js
connectedCallback() {
    this.addEventListener('dragover', (event) => {
      event.preventDefault();
    });

    this.addEventListener('drop', (event) => {
      event.preventDefault();
      const $todoApp = document.querySelector('todo-app');
      const $targetContainer =
        $todoApp.shadowRoot.querySelector('.drag-target');
      const $targetList =
        $targetContainer.shadowRoot.querySelector('todo-list');
      const $targetItem = $targetList.shadowRoot.querySelector('.drag-target');
      $targetItem.remove();
      event.target.shadowRoot.appendChild($targetItem);
      $targetItem.dataset.containerTitle = event.target.dataset.containerTitle;

      const $targetToolbar =
        $targetContainer.shadowRoot.querySelector('todo-toolbar');
      const $noteCountBefore =
        $targetToolbar.shadowRoot.querySelector('.count-item');
      $noteCountBefore.textContent = +$noteCountBefore.textContent - 1;

      const $noteCountAfter =
        event.target.previousElementSibling.previousElementSibling.shadowRoot.querySelector(
          '.count-item'
        );
      $noteCountAfter.textContent = +$noteCountAfter.textContent + 1;

      const $record = document.createElement('div');
      $record.className = 'record';
      $record.innerHTML = `<span class="record-important">@Jayden</span> moved <span class="record-item">${$targetItem.dataset.itemTitle}</span> to <span class="record-container">${event.target.dataset.containerTitle}</span> from <span class="record-container">${$targetContainer.dataset.containerTitle}</span>`;

      const now = Date.now();
      $record.dataset.timeMakeNote = now;
      activityLog.push($record);

      $targetContainer.classList.remove('drag-target');
      $targetList.classList.remove('drag-target');
      $targetItem.classList.remove('drag-target');
    });
  }
```

ì´ë²ˆì—” ë¹ˆ ê³µê°„(Itemë“¤ì´ ë“¤ì–´ê°ˆ List)ì— drop ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë¶™ì´ê³  íƒ€ê²Ÿì„ ì°¾ëŠ” ê²½ë¡œ(?)ë§Œ ì¡°ê¸ˆ ë‹¬ë ¤ì¡Œì„ ë¿ ìœ„ì™€ ê±°ì˜ ë¡œì§ì€ ë™ì¼í•˜ë‹¤!

---

### ğŸ”š í”„ë¡œì íŠ¸ íšŒê³ 

ê·¸ë™ì•ˆ html, css, jsë¡œë§Œ ê°„ë‹¨í•˜ê²Œ ì´ë¤„ì§„ í”„ë¡œì íŠ¸ë§Œ ì§„í–‰í•˜ë‹¤ê°€ ëª¨ë“ˆ, ì»´í¬ë„ŒíŠ¸ ë“±ì˜ ê°œë…ì„ ë„ì…í•˜ë©´ì„œ ìƒˆë¡œìš´ ëˆˆì„ ì–»ê²Œ ëœ ê²ƒ ê°™ë‹¤.<br/>
ì™œ ëª¨ë“ˆì„ ì‚¬ìš©í•˜ëŠ”ì§€, ì»´í¬ë„ŒíŠ¸ëŠ” ë­ê³  ì›¹ ì»´í¬ë„ŒíŠ¸ëŠ” ì™œ ì¡´ì¬í•˜ëŠ”ì§€ë¶€í„° ë” ë‚˜ì•„ê°€ì„œ ì´ë ‡ê²Œ ê¸°ëŠ¥ ë³„ í˜¹ì€ UIì— ë”°ë¼ êµ¬ë¶„ì§€ì–´ì„œ ì œí’ˆì„ ë§Œë“œëŠ” ê²Œ ë¬´ìŠ¨ ì˜ë¯¸ê°€ ìˆëŠ”ì§€ì— ëŒ€í•´ì„œ ìƒê°í•´ë³¼ ìˆ˜ ìˆì—ˆë‹¤. ìì—°ìŠ¤ëŸ½ê²Œ ê°ì²´ì§€í–¥ì— ëŒ€í•œ ê°œë…ë„ ì°¾ì•„ë³´ê²Œ ë˜ê³  ì•„ì§ì€ ì •ë¦¬í•´ì•¼í•  ê²Œ ì‚°ë”ë¯¸ì§€ë§Œ ì •ë§ ê·¸ë™ì•ˆì€ ë³¼ ìˆ˜ ì—†ì—ˆë˜ ì„¸ìƒì„ ì•Œê²Œ ëœ ê²ƒ ê°™ì•„ì„œ ë¿Œë“¯í•˜ë‹¤.<br/>
ë˜, ì½”ë“œ ìì²´ëŠ” ë„ˆë¬´ë‚˜ ì§€ì €ë¶„í•˜ì§€ë§Œ ëª©í‘œí–ˆë˜ ê¸°ëŠ¥ë“¤ì„ ëê¹Œì§€ êµ¬í˜„í–ˆë‹¤ëŠ” ì ì—ì„œ ë‚˜ ìì‹ ì„ ì¹­ì°¬í•´ì£¼ê³  ì‹¶ë‹¤.<br/>
ë°°ìš¸ ê²Œ ë§ë‹¤ëŠ” ê±´ ë•Œë¡œëŠ” ìŠ¤íŠ¸ë ˆìŠ¤ì´ê³  ê³ í†µì¼ ìˆ˜ ìˆê² ì§€ë§Œ, ë‚˜ì•„ê°ˆ ê²ƒì´ ë§ë‹¤ëŠ” ì˜ë¯¸ì´ê¸°ì— ì„¤ë ˆëŠ” ì¼ì´ê¸°ë„ í•œ ê²ƒ ê°™ë‹¤.<br/>
í”íˆ ë„ì„œë‚˜ ì˜í™”, ì›¹íˆ° ë“±ì—ì„œ ëª…ì‘ì„ ì•„ì§ ì•ˆë³¸ ì‚¬ëŒë“¤ì—ê²Œ `ì™€... ë„ˆë¬´ ë¶€ëŸ½ë‹¤. ê·¸ ëª…ì‘ ì•ˆë³¸ ë‡Œ ì‚¬ê³  ì‹¶ë‹¤.`ë¼ëŠ” í‘œí˜„ì„ ì“´ë‹¤.<br/>
ë•Œë¡œëŠ” ì•„ì§ ëª¨ë¥´ëŠ” ê²Œ ë„ˆë¬´ë‚˜ ë§ì•„ ì¡°ë°”ì‹¬ì´ ë‚˜ì§€ë§Œ, ì´ë ‡ê²Œ ë°°ìš¸ ê²Œ ë§ì€ ì§€ê¸ˆì´ ì°¸ ì†Œì¤‘í•˜ê³  ì´ëŸ° ìƒê°ì„ í•˜ê³  ìˆëŠ” ë‚´ ìì‹ ì„ ë” ì‘ì›í•˜ê³  ì‹¶ë‹¤.<br/>

```toc

```
